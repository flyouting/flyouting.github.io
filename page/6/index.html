<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>flyouting and shirley</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="flyouting and shirley">
<meta property="og:url" content="http://coofee.me/page/6/index.html">
<meta property="og:site_name" content="flyouting and shirley">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="flyouting and shirley">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="flyouting and shirley" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://ww2.sinaimg.cn/small/4a242739gw1eu09kkcr5xj2050050glt.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">flyouting and shirley</a></h1>
		</hgroup>

		
		<p class="header-subtitle">记录一点一滴</p>
		

		<!--
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		-->

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">首页</a></li>
				        
							<li><a href="/archives">文章列表</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/flyouting" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/flyouting" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/flyouting" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="mailto:flyouting@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				<!--<div class="switch-part switch-part2"><script>var n ='b-26003349-pe-f-801';var ch ='pc_6'; var w1 = 200;var h1 = 280;</script> <script src='http://static.luna.58.com/js/mad.js'></script></div>
				-->
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AndroidStudio/" style="font-size: 10px;">AndroidStudio</a> <a href="/tags/DB/" style="font-size: 12.5px;">DB</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/ImageSpan/" style="font-size: 10px;">ImageSpan</a> <a href="/tags/ORM/" style="font-size: 12.5px;">ORM</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/activeandroid/" style="font-size: 10px;">activeandroid</a> <a href="/tags/android/" style="font-size: 17.5px;">android</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/key/" style="font-size: 10px;">key</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/span/" style="font-size: 10px;">span</a> <a href="/tags/transitions/" style="font-size: 10px;">transitions</a> <a href="/tags/volley/" style="font-size: 15px;">volley</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/后台，多线程/" style="font-size: 10px;">后台，多线程</a> <a href="/tags/相机/" style="font-size: 15px;">相机</a> <a href="/tags/终端/" style="font-size: 10px;">终端</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">flyouting and shirley</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://ww2.sinaimg.cn/small/4a242739gw1eu09kkcr5xj2050050glt.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">flyouting and shirley</h1>
			</hgroup>
			
			<p class="header-subtitle">记录一点一滴</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">首页</a></li>
		        
					<li><a href="/archives">文章列表</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/flyouting" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/flyouting" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/flyouting" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="mailto:flyouting@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-learn-python-the-hard-way-exercise22" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/23/learn-python-the-hard-way-exercise22/" class="article-date">
  	<time datetime="2014-11-23T06:01:53.000Z" itemprop="datePublished">2014-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/23/learn-python-the-hard-way-exercise22/">笨办法学Python--exercise22. 到目前为止你学到了什么？</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这节以及下节的练习中没有代码编写，所以也不会有习题答案以及附加题。实际上，你可以把这节练习当做一个大的附加题对待，我会带你复习一下你学到的东西。</p>
<p>首先，回顾你做过的每一个练习的脚本，把遇到的每一个词和符号（或者叫做字符）写下来，确保你的符号表是完整的，没有遗漏。</p>
<p>然后，在每个关键词或者符号后面，写下他们的名字以及作用。如果你在本书中找不到一个符号的名字，你可以上网搜索一下；如果你不知道一个关键词或者符号的作用，找到用到该字符的练习章节，通读一遍，并在脚本中测试一下它的功能。</p>
<p>你或许会遇到一些你怎么也找不到答案的东西，把他们记在列表中，等你下次遇到的时候，就不会轻易的跳过了。</p>
<p>完成你的列表之后，再花几天时间重写一遍这个列表，并确认列表的内容都是正确的。你可能会觉得这件事情很无聊，但是一定要坚持完成。</p>
<p>等你记住列表中的内容，尝试默写一遍，包括这些字符的名字和他们的作用，。如果发现忘记一些了某些内容，就回去再记一遍。</p>
<blockquote>
<p><strong>Warning:</strong><br>请牢记：这节练习没有失败，只有尝试。</p>
</blockquote>
<h2 id="你学到的东西"><a href="#你学到的东西" class="headerlink" title="你学到的东西"></a>你学到的东西</h2><p>这种记忆练习是很枯燥的，所以你要明确这种练习的重要意义：它能帮你明确目标，知道你所有努力的目的。</p>
<p>这节练习中，你学到的是各种符号的名称和作用，这样能帮助你更容易的阅读代码。这跟你学习英文的字母表有一样的意义，不一样的是，Python中有一些字符是你并不熟悉的。</p>
<p>慢慢做，别让它成为你的负担。这些符号对你来说应该比较熟悉，所以记住它们应该不是很费力的事情。你可以一次花15分钟，然后休息一下。劳逸结合可以让你学得更快，而且可以让你保持士气。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise21" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/23/learn-python-the-hard-way-exercise21/" class="article-date">
  	<time datetime="2014-11-23T05:11:35.000Z" itemprop="datePublished">2014-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/23/learn-python-the-hard-way-exercise21/">笨办法学Python--exercise21. 函数的返回值</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你已经学过使用<code>=</code>给变量命名，将变量定义为某个数字或者字符串。接下来我们将让你见证更多奇迹。我们要给你演示如何使用<code>=</code>以及一个新的Python关键字<code>return</code>来将变量设置为“一个函数的值”。有一点你需要极其注意，不过我们先来编写下面的脚本吧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"ADDING %d + %d"</span> % (a, b)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">subtract</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"SUBTRACTING %d - %d"</span> % (a, b)</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"MULTIPLYING %d * %d"</span> % (a, b)</span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"DIVIDING %d / %d"</span> % (a, b)</span><br><span class="line">    <span class="keyword">return</span> a / b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Let's do some math with just functions!"</span></span><br><span class="line"></span><br><span class="line">age = add(<span class="number">30</span>, <span class="number">5</span>)</span><br><span class="line">height = subtract(<span class="number">78</span>, <span class="number">4</span>)</span><br><span class="line">weight = multiply(<span class="number">90</span>, <span class="number">2</span>)</span><br><span class="line">iq = divide(<span class="number">100</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Age: %d, Height: %d, Weight: %d, IQ: %d"</span> % (age, height, weight, iq)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># A puzzle for the extra credit, type it in anyway.</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Here is a puzzle."</span></span><br><span class="line"></span><br><span class="line">what = add(age, subtract(height, multiply(weight, divide(iq, <span class="number">2</span>))))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"That becomes: "</span>, what, <span class="string">"Can you do it by hand?"</span></span><br></pre></td></tr></table></figure>
<p>现在我们创建了自己的加减乘除数学函数： <code>add</code>, <code>subtract</code>, <code>multiply</code>, 以及 <code>divide</code>。重要的是函数的最后一行，例如 <code>add</code> 的最后一行是 <code>return a + b</code>，它实现的功能是这样的:</p>
<blockquote>
<ol>
<li>我们调用函数时使用了两个参数： a 和 b 。</li>
<li>我们打印出这个函数的功能，这里就是计算加法（adding）</li>
<li>接下来我们告诉 Python 让它做某个回传的动作：我们将 <code>a + b</code> 的值返回(return)。或者你可以这么说：“我将 a 和 b 加起来，再把结果返回。”</li>
<li>Python 将两个数字相加，然后当函数结束的时候，它就可以将 <code>a + b</code> 的结果赋予一个变量。</li>
</ol>
</blockquote>
<p>和本书里的很多其他东西一样，你要慢慢消化这些内容，一步一步执行下去，追踪一下究竟发生了什么。为了帮助你理解，本节的附加题将让你解决一个迷题，并且让你学到点比较酷的东西。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><pre><code>$ python ex21.py
Let&apos;s do some math with just functions!
ADDING 30 + 5
SUBTRACTING 78 - 4
MULTIPLYING 90 * 2
DIVIDING 100 / 2
Age: 35, Height: 74, Weight: 180, IQ: 50
Here is a puzzle.
DIVIDING 50 / 2
MULTIPLYING 180 * 25
SUBTRACTING 74 - 4500
ADDING 35 + -4426
That becomes:  -4391 Can you do it by hand?
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>如果你不是很确定<code>return</code>的功能，尝试自己写几个函数出来，让它们返回一些值。你可以将任何可以放在<code>=</code>右边的东西作为一个函数的返回值。</li>
<li>这个脚本的结尾是一个迷题。我将一个函数的返回值用作了另外一个函数的参数。我将它们连接一起，就像写数学等式一样。这样可能有些难懂，不过运行一下你就知道结果了。你可以试试看能不能用正常的方法实现和这个表达式一样的功能。</li>
<li>一旦你解决了这个迷题，试着修改一下函数里的某些部分，然后看会有什么样的结果。你可以有目的地修改它，让它输出另外一个值。</li>
<li>颠倒过来再做一次。写一个简单的等式，使用相同的函数来计算它。</li>
</ol>
</blockquote>
<p>这节习题可能会让你有些头大，不过慢慢来，把它当做一个小游戏，解决这样的迷题也是编程的乐趣之一。后面你还会看到类似的小谜题。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-为什么Python打印公式或函数是反向的？"><a href="#Q-为什么Python打印公式或函数是反向的？" class="headerlink" title="Q:为什么Python打印公式或函数是反向的？"></a>Q:为什么Python打印公式或函数是反向的？</h3><blockquote>
<p>它们并不是真正的反向的, it’s “inside out.” When you start breaking down the function into separate formulas and function calls you’ll see how it works. Try to understand what I mean by “inside out” rather than “backward.”</p>
</blockquote>
<h3 id="Q-怎样使用raw-input-输入我自己的值？"><a href="#Q-怎样使用raw-input-输入我自己的值？" class="headerlink" title="Q: 怎样使用raw_input() 输入我自己的值？"></a>Q: 怎样使用<code>raw_input()</code> 输入我自己的值？</h3><blockquote>
<p>还记得 <code>int(raw_input())</code>吗? 这样做有一个问题就是你不能输入浮点数，不过你可以使用 <code>float(raw_input())</code>来输入。</p>
</blockquote>
<h3 id="Q-你说的-“写一个公式”是什么意思"><a href="#Q-你说的-“写一个公式”是什么意思" class="headerlink" title="Q: 你说的 “写一个公式”是什么意思?"></a>Q: 你说的 “写一个公式”是什么意思?</h3><blockquote>
<p>试试先写<code>24 + 34 / 100 - 1023</code>，再用我们的函数转化一下。现在给你的数学公式加入变量，这样它就变成了一个公式。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise20" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/23/learn-python-the-hard-way-exercise20/" class="article-date">
  	<time datetime="2014-11-23T03:15:02.000Z" itemprop="datePublished">2014-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/23/learn-python-the-hard-way-exercise20/">笨办法学Python--exercise20. 函数和文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>回忆一下函数的要点，然后一边做这节练习，一边注意一下函数和文件是如何在一起协作发挥作用的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">script, input_file = argv</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_all</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> f.read()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rewind</span><span class="params">(f)</span>:</span></span><br><span class="line">    f.seek(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_a_line</span><span class="params">(line_count, f)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> line_count, f.readline()</span><br><span class="line"></span><br><span class="line">current_file = open(input_file)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"First let's print the whole file:\n"</span></span><br><span class="line"></span><br><span class="line">print_all(current_file)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Now let's rewind, kind of like a tape."</span></span><br><span class="line"></span><br><span class="line">rewind(current_file)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Let's print three lines:"</span></span><br><span class="line"></span><br><span class="line">current_line = <span class="number">1</span></span><br><span class="line">print_a_line(current_line, current_file)</span><br><span class="line"></span><br><span class="line">current_line = current_line + <span class="number">1</span></span><br><span class="line">print_a_line(current_line, current_file)</span><br><span class="line"></span><br><span class="line">current_line = current_line + <span class="number">1</span></span><br><span class="line">print_a_line(current_line, current_file)</span><br></pre></td></tr></table></figure>
<p>特别注意一下，每次运行<code>print_a_line</code>时，我们是怎样传递当前的行号信息的。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><pre><code>$ python ex20.py test.txt
First let&apos;s print the whole file:

This is line 1
This is line 2
This is line 3

Now let&apos;s rewind, kind of like a tape.
Let&apos;s print three lines:
1 This is line 1

2 This is line 2

3 This is line 3
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>通读脚本，在每行之前加上注解，以理解脚本里发生的事情。</li>
<li>每次<code>print_a_line</code>运行时，都传递了一个叫<code>current_line</code>的变量。在每次调用函数时，打印出<code>current_line</code>的值，跟踪一下它在<code>print_a_line</code>中是怎样变成<code>line_count</code>的。</li>
<li>找出脚本中每一个用到函数的地方。检查<code>def</code>一行，确认参数没有用错。</li>
<li>上网研究一下<code>file</code>中的<code>seek</code>函数是做什么用的。试着运行<code>pydoc file</code>看看能不能学到更多。</li>
<li>研究一下<code>+=</code>这个简写操作符的作用，写一个脚本，把这个操作符用在里边试一下。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-函数print-all中的f是什么"><a href="#Q-函数print-all中的f是什么" class="headerlink" title="Q:函数print_all中的f是什么?"></a>Q:函数<code>print_all</code>中的<code>f</code>是什么?</h3><blockquote>
<p><code>f</code> 就是一个变量，就好像在练习18中其他的变量一样，只不过这次它代表了一个文件。 Python中的文件就好像老旧的磁带驱动器，或者是像现在的DVD播放器。它有一个 “磁头”，你可以在文件中”查找”到这个磁头的位置，并且从那个位置开始运行。你每执行一次 <code>f.seek(0)</code>，就靠近文件的开头一点。每执行一次<code>f.readline()</code>你就从文件中读取一行内容，并且把“磁头”移动到文件末尾，换行符<code>\n</code>的后面。继续学习本书，你会看到更多的解释。</p>
</blockquote>
<h3 id="Q-文件中为什么有3个空行？"><a href="#Q-文件中为什么有3个空行？" class="headerlink" title="Q: 文件中为什么有3个空行？"></a>Q: 文件中为什么有3个空行？</h3><blockquote>
<p>函数 <code>readline()</code> 返回一行以<code>\n</code>结尾的文件内容， 在你调用print函数的最后增加一个逗号’,’，用来避免为每一行添加两个换行符<code>\n</code>。</p>
</blockquote>
<h3 id="Q-为什么seek-0-方法没有把current-line的值修改为0？"><a href="#Q-为什么seek-0-方法没有把current-line的值修改为0？" class="headerlink" title="Q:为什么seek(0)方法没有把current_line的值修改为0？"></a>Q:为什么<code>seek(0)</code>方法没有把<code>current_line</code>的值修改为0？</h3><blockquote>
<p>首先，<code>seek()</code>方法是按字节而不是按行为处理单元的。代码<code>seek(0)</code>重新定位在文件的第0位（第一个字节处）。再次，<code>current_line</code>是一个变量，在文件中没有真正的意义可言。我们是在手动的增加它的值。</p>
</blockquote>
<h3 id="Q-是什么"><a href="#Q-是什么" class="headerlink" title="Q:+=是什么?"></a>Q:<code>+=</code>是什么?</h3><blockquote>
<p>你应该知道在英语里我们可以简写 “it is” 为 “it’s”，简写 “you are” 为 “you’re”。在英语里我们把这种写法称为缩写，同样的，<code>+=</code>是 <code>=</code>和 <code>+</code>两个操作符的缩写. 比如<code>x = x + y</code>可以缩写为<code>x += y</code>.</p>
</blockquote>
<h3 id="Q-readline-怎么知道每一行的分界在哪里？"><a href="#Q-readline-怎么知道每一行的分界在哪里？" class="headerlink" title="Q:readline()怎么知道每一行的分界在哪里？"></a>Q:<code>readline()</code>怎么知道每一行的分界在哪里？</h3><blockquote>
<p><code>readline()</code>内部代码是扫描文件的每一个字节，直到找到一个<code>\n</code>字符代码，然后停止阅读，并返回到此之前获得的所有内容。代码中f的责任是在每次调用<code>readline()</code>之后，维护“磁头”在文件中的位置，以保证继续读后面的每一行。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise19" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/23/learn-python-the-hard-way-exercise19/" class="article-date">
  	<time datetime="2014-11-23T02:32:25.000Z" itemprop="datePublished">2014-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/23/learn-python-the-hard-way-exercise19/">笨办法学Python--exercise19.函数和变量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>函数这个概念也许承载了太多的信息量，不过别担心。只要坚持做这些练习，对照上个练习中的检查点检查一遍这次的联系，你最终会明白这些内容的。</p>
<p>有一个你可能没有注意到的细节，我们现在强调一下：函数里边的变量和脚本里边的变量之间是没有关系的。下面的这个练习可以让你对这一点有更多的思考：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cheese_and_crackers</span><span class="params">(cheese_count, boxes_of_crackers)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"You have %d cheeses!"</span> % cheese_count</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"You have %d boxes of crackers!"</span> % boxes_of_crackers</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Man that's enough for a party!"</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Get a blanket.\n"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"We can just give the function numbers directly:"</span></span><br><span class="line">cheese_and_crackers(<span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"OR, we can use variables from our script:"</span></span><br><span class="line">amount_of_cheese = <span class="number">10</span></span><br><span class="line">amount_of_crackers = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">cheese_and_crackers(amount_of_cheese, amount_of_crackers)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"We can even do math inside too:"</span></span><br><span class="line">cheese_and_crackers(<span class="number">10</span> + <span class="number">20</span>, <span class="number">5</span> + <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"And we can combine the two, variables and math:"</span></span><br><span class="line">cheese_and_crackers(amount_of_cheese + <span class="number">100</span>, amount_of_crackers + <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>通过这个练习，你看到我们给函数<code>cheese_and_crackers</code>传递很多的参数，然后在函数里把它们打印出来。我们可以在函数里用变量名，可以在函数里做运算，甚至可以将变量和运算结合起来。</p>
<p>从一方面来说，函数的参数和我们的生成变量时用的<code>=</code>赋值符类似。事实上，如果你可以用<code>=</code>给一个东西命名，你也就可以将其作为参数传递给一个函数。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>你应该研究一下脚本的输出，和你想象的结果对比一下看有什么不同。</p>
<pre><code>$ python ex19.py
We can just give the function numbers directly:
You have 20 cheeses!
You have 30 boxes of crackers!
Man that&apos;s enough for a party!
Get a blanket.

OR, we can use variables from our script:
You have 10 cheeses!
You have 50 boxes of crackers!
Man that&apos;s enough for a party!
Get a blanket.

We can even do math inside too:
You have 30 cheeses!
You have 11 boxes of crackers!
Man that&apos;s enough for a party!
Get a blanket.

And we can combine the two, variables and math:
You have 110 cheeses!
You have 1050 boxes of crackers!
Man that&apos;s enough for a party!
Get a blanket.
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>倒着将脚本读完，在每一行上面添加一行注解，说明这行的作用。</li>
<li>从最后一行开始，倒着阅读每一行，读出所有的重要字符来。</li>
<li>自己编至少一个函数出来，然后用10种方法运行这个函数。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-怎么可能有10中方法来运行一个函数？"><a href="#Q-怎么可能有10中方法来运行一个函数？" class="headerlink" title="Q: 怎么可能有10中方法来运行一个函数？"></a>Q: 怎么可能有10中方法来运行一个函数？</h3><blockquote>
<p>信不信由你,理论上有无数种方法去调用一个函数。看看你对函数、变量、用户输入有多少想象力和创造力。</p>
</blockquote>
<h3 id="Q-有没有一种方法分析一下这个函数是做什么的，这样能让我更方便的理解它？"><a href="#Q-有没有一种方法分析一下这个函数是做什么的，这样能让我更方便的理解它？" class="headerlink" title="Q:有没有一种方法分析一下这个函数是做什么的，这样能让我更方便的理解它？"></a>Q:有没有一种方法分析一下这个函数是做什么的，这样能让我更方便的理解它？</h3><blockquote>
<p>有很多种方法可以做到,但是尽量采用给每行增加注释的方式。另一种方式是大声的读出代码。第三种方式是将代码打印在纸上，并添加图片和注释用来解释代码实现了什么功能。</p>
</blockquote>
<h3 id="Q-如果我希望用户输入芝士和饼干的数量，我该怎么做？"><a href="#Q-如果我希望用户输入芝士和饼干的数量，我该怎么做？" class="headerlink" title="Q: 如果我希望用户输入芝士和饼干的数量，我该怎么做？"></a>Q: 如果我希望用户输入芝士和饼干的数量，我该怎么做？</h3><blockquote>
<p>你可以使用<code>int()</code>把你从<code>raw_input()</code>获取的参数转化为数字。</p>
</blockquote>
<h3 id="Q-在函数中能否改变变量cheese-count和amount-of-cheese的值？"><a href="#Q-在函数中能否改变变量cheese-count和amount-of-cheese的值？" class="headerlink" title="Q: 在函数中能否改变变量cheese_count和amount_of_cheese的值？"></a>Q: 在函数中能否改变变量<code>cheese_count</code>和<code>amount_of_cheese</code>的值？</h3><blockquote>
<p>当然不能, 这些变量是独立的，在函数体之外。 他们被作为零食变量传递给函数是为了保证函数的正常运行，当函数退出的时候，这些临时变量也就消失了。继续学习本书，你会更明白这些。</p>
</blockquote>
<h3 id="Q-定义一个和函数名相同名字的全局变量是不是不好？"><a href="#Q-定义一个和函数名相同名字的全局变量是不是不好？" class="headerlink" title="Q: 定义一个和函数名相同名字的全局变量是不是不好？"></a>Q: 定义一个和函数名相同名字的全局变量是不是不好？</h3><blockquote>
<p>当然不好, 如果你这么做了，后面你就搞不清你在说变量还是函数了。 但有时候你可能必须要用相同的名字，否则你可能会遇到一些难题。但是不管怎么说，尽量避开这种做法。</p>
</blockquote>
<h3 id="Q-函数可以限制参数的传递个数？"><a href="#Q-函数可以限制参数的传递个数？" class="headerlink" title="Q: 函数可以限制参数的传递个数？"></a>Q: 函数可以限制参数的传递个数？</h3><blockquote>
<p>这取决于你python的版本以及你用什么电脑，即使有这个限制的数字也是非常大的。为了使函数方便使用，实际的限制大约时5个参数，也就是说当函数参数超过5个的时候，函数就会变得不方便使用。</p>
</blockquote>
<h3 id="Q-你能在一个函数中调用另一个函数吗？"><a href="#Q-你能在一个函数中调用另一个函数吗？" class="headerlink" title="Q:你能在一个函数中调用另一个函数吗？"></a>Q:你能在一个函数中调用另一个函数吗？</h3><blockquote>
<p>可以，本书后面有一个制作游戏的例子就是这么做的。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise18" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise18/" class="article-date">
  	<time datetime="2014-11-22T14:53:55.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise18/">笨办法学Python--exercise18.命名, 变量, 代码, 函数</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>标题包含的内容够多的吧？接下来我要教你“函数(function)”了！说到函数，不一样的人会对它有不一样的理解和使用方法，不过我只会教你现在能用到的最简单的使用方式。</p>
<p>函数可以做三样事情：</p>
<blockquote>
<ol>
<li>它们给代码片段命名，就跟“变量”给字符串和数字命名一样。</li>
<li>它们可以接受参数，就跟你的脚本接受<code>argv</code>一样。</li>
<li>通过使用 #1 和 #2，它们可以让你创建“微型脚本”或者“小命令”。</li>
</ol>
</blockquote>
<p>python中你可以使用<code>def</code>新建函数。我将让你创建四个不同的函数，它们工作起来和你的脚本一样。然后我会演示给你各个函数之间的关系。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># this one is like your scripts with argv</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_two</span><span class="params">(*args)</span>:</span></span><br><span class="line">    arg1, arg2 = args</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"arg1: %r, arg2: %r"</span> % (arg1, arg2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ok, that *args is actually pointless, we can just do this</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_two_again</span><span class="params">(arg1, arg2)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"arg1: %r, arg2: %r"</span> % (arg1, arg2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># this just takes one argument</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_one</span><span class="params">(arg1)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"arg1: %r"</span> % arg1</span><br><span class="line"></span><br><span class="line"><span class="comment"># this one takes no arguments</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_none</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"I got nothin'."</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_two(<span class="string">"Zed"</span>,<span class="string">"Shaw"</span>)</span><br><span class="line">print_two_again(<span class="string">"Zed"</span>,<span class="string">"Shaw"</span>)</span><br><span class="line">print_one(<span class="string">"First!"</span>)</span><br><span class="line">print_none()</span><br></pre></td></tr></table></figure></p>
<p>让我们把地一个函数<code>print_two</code>分解一下，这个函数和你写脚本的方式差不多，因此你看上去应该会觉着比较眼熟：</p>
<blockquote>
<p>1.首先我们告诉Python创建一个函数，我们使用到的命令是<code>def</code>，也就是“定义(define)”的意思。</p>
<ol>
<li>紧接着def的是函数的名称。本例中它的名称是<code>print_two</code>，但名字可以随便取，就叫<code>peanuts</code>也没关系。但函数名最好能够体现出函数的功能来。</li>
<li>然后我们告诉函数我们需要<code>*args</code>，这和脚本的<code>argv</code>非常相似，参数必须放在圆括号 () 中才能正常工作。</li>
<li>接着我们用冒号<code>:</code>结束本行，然后开始下一行缩进。</li>
<li>冒号以下，使用4个空格缩进的行都是属于<code>print_two</code>这个函数的内容。 其中第一行的作用是将参数解包，这和脚本参数解包的原理差不多。</li>
<li>为了演示它的工作原理，我们把解包后的每个参数都打印出来，这和我们在之前脚本练习中所作的类似。</li>
</ol>
</blockquote>
<p>函数<code>print_two</code>的问题是：它并不是创建函数最简单的方法。在 Python 函数中我们可以跳过整个参数解包的过程，直接使用<code>()</code>里边的名称作为变量名。这就是<code>print_two_again</code>实现的功能。</p>
<p>接下来的例子是<code>print_one</code>，它向你演示了函数如何接受单个参数。</p>
<p>最后一个例子是<code>print_none</code>，它向你演示了函数可以不接收任何参数。</p>
<blockquote>
<p><strong>Warning:</strong><br>如果你不太能看懂上面的内容也别气馁。后面我们还有更多的练习向你展示如何创建和使用函数。现在你只要把函数理解成“迷你脚本”就可以了。</p>
</blockquote>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>运行上面的脚本会看到如下结果:</p>
<pre><code>$ python ex18.py
arg1: &apos;Zed&apos;, arg2: &apos;Shaw&apos;
arg1: &apos;Zed&apos;, arg2: &apos;Shaw&apos;
arg1: &apos;First!&apos;
I got nothin&apos;.
$
</code></pre><p>你应该已经看出函数是怎样工作的了。注意到函数的用法和你以前见过的 <code>exists</code>、<code>open</code>，以及别的“命令”有点类似了吧？其实我只是为了让你容易理解才叫它们“命令”，它们的本质其实就是函数。也就是说，你也可以在自己的脚本中创建你自己的“命令”。</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><p>为自己写一个<code>函数注意事项</code>以供后续参考。你可以写在一个索引卡片上随时阅读，直到你记住所有的要点为止。注意事项如下：</p>
<blockquote>
<ol>
<li>函数定义是以 <code>def</code> 开始的吗？</li>
<li>函数名称是以字符和下划线 <code>_</code>组成的吗？</li>
<li>函数名称是不是紧跟着括号 <code>(</code> ？</li>
<li>括号里是否包含参数？多个参数是否以逗号隔开？</li>
<li>参数名称是否有重复？（不能使用重复的参数名）</li>
<li>紧跟着参数的是不是括号和冒号 <code>):</code> ？</li>
<li>紧跟着函数定义的代码是否使用了 4 个空格的缩进 (indent)？</li>
<li>函数结束的位置是否取消了缩进 (“dedent”)？</li>
</ol>
</blockquote>
<p>当你运行（或者说“使用use”或“调用call”）一个函数时，记得检查下面的点：</p>
<blockquote>
<ol>
<li>调运函数时是否使用了函数的名称？</li>
<li>函数名称是否紧跟着 <code>(</code>？</li>
<li>括号后有无参数？多个参数是否以逗号隔开？</li>
<li>函数是否以 <code>)</code> 结尾？</li>
</ol>
</blockquote>
<p>按照这两份检查表里的内容检查你的代码，直到你不需要检查表为止。</p>
<p>最后，将下面这句话阅读几遍：</p>
<pre><code>‘运行函数(run)’、‘调用函数(call)’、和‘使用函数(use)’是同一个意思
</code></pre><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-什么字符允许用在函数名上？"><a href="#Q-什么字符允许用在函数名上？" class="headerlink" title="Q:什么字符允许用在函数名上？"></a>Q:什么字符允许用在函数名上？</h3><blockquote>
<p>和变量命名规则相同。不能以数字开头，并且只能包含字母数字和下划线。</p>
</blockquote>
<h3 id="Q-args-中的星号-是干嘛的？"><a href="#Q-args-中的星号-是干嘛的？" class="headerlink" title="Q:*args 中的星号*是干嘛的？"></a>Q:<code>*args</code> 中的星号<code>*</code>是干嘛的？</h3><blockquote>
<p>它告诉python把函数的所有参数组织一个列表放在<code>args</code>里。类似你之前用过的<code>argv</code>，只不过<code>*args</code>是用在函数里的，</p>
</blockquote>
<h3 id="Q-这个练习让我觉得枯燥"><a href="#Q-这个练习让我觉得枯燥" class="headerlink" title="Q: 这个练习让我觉得枯燥"></a>Q: 这个练习让我觉得枯燥</h3><blockquote>
<p>这是好事，说明你在输入代码方面做的越来越好，而且也能很好的明白这些代码是做什么的，想让练习不那么枯燥，输入我让你练习的代码，然后故意出错，检查你的错误并修复它们。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise17" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise17/" class="article-date">
  	<time datetime="2014-11-22T12:04:12.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise17/">笨办法学Python--exercise17.更多文件操作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>现在让我们再学习几种文件操作。我们将编写一个Python脚本，将一个文件中的内容拷贝到另外一个文件中。这个脚本很短，不过它会让你对于文件操作有更多的了解。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> exists</span><br><span class="line"></span><br><span class="line">script, from_file, to_file = argv</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Copying from %s to %s"</span> % (from_file, to_file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># we could do these two on one line, how?</span></span><br><span class="line">in_file = open(from_file)</span><br><span class="line">indata = in_file.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"The input file is %d bytes long"</span> % len(indata)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Does the output file exist? %r"</span> % exists(to_file)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Ready, hit RETURN to continue, CTRL-C to abort."</span></span><br><span class="line">raw_input()</span><br><span class="line"></span><br><span class="line">out_file = open(to_file, <span class="string">'w'</span>)</span><br><span class="line">out_file.write(indata)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Alright, all done."</span></span><br><span class="line"></span><br><span class="line">out_file.close()</span><br><span class="line">in_file.close()</span><br></pre></td></tr></table></figure></p>
<p>你应该很快注意到了我们<code>import</code>了又一个很好用的命令<code>exists</code>。这个命令将文件名字符串作为参数，如果文件存在的话，它将返回<code>True</code>，否则将返回 <code>False</code>。在本书的下半部分，我们将使用这个函数做很多的事情，不过现在你应该学会怎样通过 import 调用它.</p>
<p>通过使用<code>import</code>，你可以在自己代码中直接使用其他更厉害的（通常是这样，不过也不 尽然）程序员写的大量免费代码，这样你就不需要重写一遍了。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>和你前面写的脚本一样，运行该脚本需要两个参数，一个是待拷贝的文件，一个是要拷贝至的文件。我再创建一个名为<code>test.txt</code>的测试文件，我们将看到如下的结果:</p>
<pre><code>$ echo &quot;This is a test file.&quot; &gt; test.txt
</code></pre><p><div></div><br>    $ cat test.txt<br>    This is a test file.<br>    $<br>    $ python ex17.py test.txt new_file.txt<br>    Copying from test.txt to new_file.txt<br>    The input file is 21 bytes long<br>    Does the output file exist? False<br>    Ready, hit RETURN to continue, CTRL-C to abort.</p>
<pre><code>Alright, all done.
</code></pre><p>该命令对于任何文件都应该是有效的。试试操作一些别的文件看看结果。不过小心别把你的重要文件给弄坏了。</p>
<blockquote>
<p><strong>Warning:</strong><br>你看到我用<code>echo</code>命令创建一个文件，并用<code>cat</code>命令展示一个文件了吧？它们只能在 Linux 和 OSX 下使用，你可以阅读附录A获得者两个命令的使用方法。</p>
</blockquote>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>这个脚本 实在是有点烦人。没必要在拷贝之前问一遍把，没必要在屏幕上输出那么多东西。试着删掉脚本的一些功能，让它使用起来更加友好。</li>
<li>看看你能把这个脚本改多短，我可以把它写成一行。</li>
<li>我使用了一个叫<code>cat</code>的东西，这个古老的命令的用处是将两个文件“连接(con*cat*enate)”到一起，不过实际上它最大的用途是打印文件内容到屏幕上。你可以通过 <code>man cat</code> 命令了解到更多信息。(windows下没有这个命令)</li>
<li>找出为什么你需要在代码中写 output.close() 。</li>
<li>再多读读和<code>import</code>相关的材料，将python运行起来，试试这一条命令。试着看看自己能不能摸出点门道，当然了，即使弄不明白也没关系。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-为什么-39-w-39-要写在引号里？"><a href="#Q-为什么-39-w-39-要写在引号里？" class="headerlink" title="Q: 为什么&#39;w&#39;要写在引号里？"></a>Q: 为什么<code>&#39;w&#39;</code>要写在引号里？</h3><blockquote>
<p>它只是个字符串，你已经做过太多关于字符串的练习了，你知道什么是字符串的，对吗？</p>
</blockquote>
<h3 id="Q-总是感觉这些练习很难，这正常吗？"><a href="#Q-总是感觉这些练习很难，这正常吗？" class="headerlink" title="Q:总是感觉这些练习很难，这正常吗？"></a>Q:总是感觉这些练习很难，这正常吗？</h3><blockquote>
<p>这很正常的。直到你做完练习36甚至完成这本书的学习，用python做出一些作品，编程对你来说可能都不是一件简单的事情。每个人都不一样，所以只要坚持复习你认为困难的习题，直到你真的搞明白它们,要有耐心。</p>
</blockquote>
<h3 id="Q-函数len-是干什么用的？"><a href="#Q-函数len-是干什么用的？" class="headerlink" title="Q:函数len()是干什么用的？"></a>Q:函数<code>len()</code>是干什么用的？</h3><blockquote>
<p>它能获得参数的长度，返回值是一个数字，你试着用用这个方法。</p>
</blockquote>
<h3 id="Q-我尝试改短代码的时候，在脚本的结尾处遇到一个关于文件关闭的问题。"><a href="#Q-我尝试改短代码的时候，在脚本的结尾处遇到一个关于文件关闭的问题。" class="headerlink" title="Q:我尝试改短代码的时候，在脚本的结尾处遇到一个关于文件关闭的问题。"></a>Q:我尝试改短代码的时候，在脚本的结尾处遇到一个关于文件关闭的问题。</h3><blockquote>
<p>你可能做了一些类似这样的事情，比如<code>indata = open(from_file).read()</code>,这样写的话，就不需要在执行关闭操作，当执行完这一行的时候，文件自动就被关闭了。</p>
</blockquote>
<h3 id="Q-我遇到一个异常Syntax-EOL-while-scanning-string-literal"><a href="#Q-我遇到一个异常Syntax-EOL-while-scanning-string-literal" class="headerlink" title="Q: 我遇到一个异常Syntax:EOL while scanning string literal"></a>Q: 我遇到一个异常<code>Syntax:EOL while scanning string literal</code></h3><blockquote>
<p>你应该是忘记在字符串的结尾加上引号了，回到你出错的那行代码，检查一下。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise16" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise16/" class="article-date">
  	<time datetime="2014-11-22T10:54:09.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise16/">笨办法学Python--exercise16.读写文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你做了上一个练习的附加题部分，你应该已经了解了文件相关的各种命令（方法/函数）。下面的这张表，是你应该记住的命令：</p>
<blockquote>
<ul>
<li>close – 关闭文件。跟你编辑器的 文件-&gt;保存.. 一个意思。</li>
<li>read – 读取文件内容。你可以把结果赋给一个变量。</li>
<li>readline – 读取文本文件中的一行。</li>
<li>truncate –  清空文件，请谨慎使用该命令。</li>
<li>write(‘stuff’) – 将stuff写入文件。</li>
</ul>
</blockquote>
<p>这是你现在该知道的重要命令。有些命令需要接受参数，这对我们并不重要。你只要记住 <code>write</code> 需要接收一个字符串作为参数，从而将该字符串写入文件。</p>
<p>让我们来使用这些命令做一个简单的文本编辑器吧:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">script, filename = argv</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"We're going to erase %r."</span> % filename</span><br><span class="line"><span class="keyword">print</span> <span class="string">"If you don't want that, hit CTRL-C (^C)."</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"If you do want that, hit RETURN."</span></span><br><span class="line"></span><br><span class="line">raw_input(<span class="string">"?"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Opening the file..."</span></span><br><span class="line">target = open(filename, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Truncating the file.  Goodbye!"</span></span><br><span class="line">target.truncate()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Now I'm going to ask you for three lines."</span></span><br><span class="line"></span><br><span class="line">line1 = raw_input(<span class="string">"line 1: "</span>)</span><br><span class="line">line2 = raw_input(<span class="string">"line 2: "</span>)</span><br><span class="line">line3 = raw_input(<span class="string">"line 3: "</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"I'm going to write these to the file."</span></span><br><span class="line"></span><br><span class="line">target.write(line1)</span><br><span class="line">target.write(<span class="string">"\n"</span>)</span><br><span class="line">target.write(line2)</span><br><span class="line">target.write(<span class="string">"\n"</span>)</span><br><span class="line">target.write(line3)</span><br><span class="line">target.write(<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"And finally, we close it."</span></span><br><span class="line">target.close()</span><br></pre></td></tr></table></figure></p>
<p>这个文件是够大的，大概是你创建过的最大的文件。所以慢慢来，仔细检查，让它能运行起来。有一个小技巧就是你可以让你的脚本一部分一部分地运行起来。先写 1-8 行，让它运行起来，再多运行5行，再接着多运行几行，以此类推，直到整个脚本运行起来为止。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>你将看到两样东西，一个是你脚本的输出:</p>
<pre><code>$ python ex16.py test.txt
We&apos;re going to erase &apos;test.txt&apos;.
If you don&apos;t want that, hit CTRL-C (^C).
If you do want that, hit RETURN.
?
Opening the file...
Truncating the file.  Goodbye!
Now I&apos;m going to ask you for three lines.
line 1:  Mary had a little lamb
line 2:  Its fleece was white as snow
line 3:  It was also tasty
I&apos;m going to write these to the file.
And finally, we close it.
</code></pre><p>接下来打开你新建的文件（我的是test.txt）检查一下里边的内容，怎么样，不错吧？</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>如果你觉得自己没有弄懂的话，用我们的老办法，在每一行之前加上注解，为自己理清思路。就算不能理清思路，你也可以知道自己究竟具体哪里没弄明白。</li>
<li>写一个和上一个练习类似的脚本，使用<code>read</code>和<code>argv</code>读取你刚才新建的文件。</li>
<li>文件中重复的地方太多了。试着用一个 <code>target.write()</code> 将 line1, line2, line3 打印出来，你可以使用字符串、格式化字符、以及转义字符。</li>
<li>找出为什么我们需要给 open 多赋予一个 ‘w’ 参数。提示： open 对于文件的写入操作态度是安全第一，所以你只有特别指定以后，它才会进行写入操作。</li>
<li>如果你使用’w’ 模式打开一个文件，那么还需要<code>target.truncate()</code>吗?阅读Python关于<code>open</code>函数的文档， 看你理解的对不对。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-truncate-方法必须要有参数’w’吗"><a href="#Q-truncate-方法必须要有参数’w’吗" class="headerlink" title="Q:truncate()方法必须要有参数’w’吗?"></a>Q:<code>truncate()</code>方法必须要有参数’w’吗?</h3><blockquote>
<p>参考附加题5</p>
</blockquote>
<h3 id="Q-‘w’参数是什么意思"><a href="#Q-‘w’参数是什么意思" class="headerlink" title="Q: ‘w’参数是什么意思?"></a>Q: ‘w’参数是什么意思?</h3><blockquote>
<p>它只是打开文件的一种模式。如果你用了这个参数，表示”以写（<code>write</code>）模式打开文件。同样有<code>&#39;r&#39;</code>表示只读模式，<code>&#39;a&#39;</code>表示追加模式，还有一些其他的修饰符。</p>
</blockquote>
<h3 id="Q-有什么修饰符我可以用在打开文件的模式上？"><a href="#Q-有什么修饰符我可以用在打开文件的模式上？" class="headerlink" title="Q: 有什么修饰符我可以用在打开文件的模式上？"></a>Q: 有什么修饰符我可以用在打开文件的模式上？</h3><blockquote>
<p>最重要的一个就是<code>+</code>, 使用它，你可以有<code>&#39;w+&#39;</code>, <code>&#39;r+&#39;</code>, 和<code>&#39;a+&#39;</code>模式. 这样可以同时以读写模式打开文件。</p>
</blockquote>
<h3 id="Q-open-filename-是以’r’-只读-模式打开文件吗"><a href="#Q-open-filename-是以’r’-只读-模式打开文件吗" class="headerlink" title="Q: open(filename)是以’r’ (只读) 模式打开文件吗?"></a>Q: <code>open(filename)</code>是以’r’ (只读) 模式打开文件吗?</h3><blockquote>
<p>是的，’r’ 是 <code>open()</code>函数的默认参数值。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise15" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise15/" class="article-date">
  	<time datetime="2014-11-22T08:44:04.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise15/">笨办法学Python--exercise15.读文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你已经学过<code>raw_input</code>和<code>argv</code>，这些是你开始学习读取文件的必备基础。你可能需要多多实验才能明白它的工作原理，所以你要细心做练习，并且仔细检查结果。处理文件需要非常仔细，否则，你可能会把有用的文件弄坏或者清空。导致前功尽弃。</p>
<p>这节练习涉及到写两个文件。一个正常的 ex15.py 文件，另外一个是 ex15_sample.txt，第二个文件并不是脚本，而是供你的脚本读取的文本文件。以下是后者的内容：</p>
<pre><code>This is stuff I typed into a file.
It is really cool stuff.
Lots and lots of fun to have in here.
</code></pre><p>我们要做的是用我们的脚本“打开(open)”这个文件，然后打印出来。然而把文件名<code>ex15_sample.txt</code>写死在代码中并不是一个好主意，这些信息应该是用户输入的才对。如果我们碰到其他文件要处理，写死的文件名就会给你带来麻烦了。我们的解决方案是使用<code>argv</code>和<code>raw_input</code>来从用户获取信息，从而知道哪些文件该被处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">script, filename = argv</span><br><span class="line"></span><br><span class="line">txt = open(filename)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Here's your file %r:"</span> % filename</span><br><span class="line"><span class="keyword">print</span> txt.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Type the filename again:"</span></span><br><span class="line">file_again = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">txt_again = open(file_again)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> txt_again.read()</span><br></pre></td></tr></table></figure>
<p>这个脚本中有一些新奇的玩意，我们来快速地过一遍：</p>
<p>代码的 1-3 行使用<code>argv</code>来获取文件名，这个你应该已经熟悉了。接下来第 5 行我们看到<code>open</code>这个新命令。现在请在命令行运行<code>pydoc open</code> 来读读它的说明。你可以看到它和你自己的脚本、或者<code>raw_input</code>命令类似，它会接受一个参数，并且返回一个值，你可以将这个值赋予一个变量。这就是你打开文件的过程。</p>
<p>第 7 行我们打印了一小行信息，但在第 8 行我们看到了新奇的东西。我们在 <code>txt</code> 上调用了一个函数。你从<code>open</code>获得了一个文件，文件本身也支持一些命令。它接受命令的方式是使用句点 <code>.</code> (英文称作 dot 或者 period)，紧跟着你的命令，然后是类似 <code>open</code> 和 <code>raw_input</code> 一样的参数。不同点是：当你执行<code>txt.read</code>时，你的意思其实是：“嘿 txt！执行你的 read 命令，无需任何参数！”</p>
<p>脚本剩下的部分基本差不多，不过我就把剩下的分析作为附加题留给你自己了。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>我创建了一个名字叫做<code>ex15_sample.txt</code>的文件，然后执行我的脚本： </p>
<pre><code>$ python ex15.py ex15_sample.txt
Here&apos;s your file &apos;ex15_sample.txt&apos;:
This is stuff I typed into a file.
It is really cool stuff.
Lots and lots of fun to have in here.

Type the filename again:
&gt;  ex15_sample.txt
This is stuff I typed into a file.
It is really cool stuff.
Lots and lots of fun to have in here.
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><p>这节的难度跨越有点大，所以你要尽量做好这节加分习题，然后再继续后面的章节。</p>
<blockquote>
<ol>
<li>在每一行的上面加上注释。</li>
<li>如果你不确定答案，就问别人，或者上网搜索。大部分时候，只要搜索 “python” 加上你要搜的东西就能得到你要的答案。比如搜索一下“python open”。</li>
<li>我使用了“命令”这个词，不过实际上它们的名字是“函数（function）”和“方法（method）。上网搜索一下这两者的意义和区别。看不明白也没关系，这本书后面也会讲到这些。</li>
<li>删掉 10-15 行使用到<code>raw_input</code>的部分，再运行一遍脚本。</li>
<li>只用<code>raw_input</code>写这个脚本，想想哪种得到文件名称的方法更好？为什么？</li>
<li>运行 python 在命令行下使用 open 打开一个文件，这种 open 和 read 的方法也值得你一学。</li>
<li>让你的脚本对 <code>txt</code>和<code>txt_again</code>两个变量执行一下 <code>close()</code>，处理完文件后你需要将其关闭，这是很重要的一点。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-txt-open-filename-返回的是文件的文本内容吗？"><a href="#Q-txt-open-filename-返回的是文件的文本内容吗？" class="headerlink" title="Q:txt = open(filename)返回的是文件的文本内容吗？"></a>Q:<code>txt = open(filename)</code>返回的是文件的文本内容吗？</h3><blockquote>
<p>不是的。它的返回值我们称为“文件对象”。你可以把文件想象成19世纪50年代的大型计算机上的老旧的磁带驱动器， 或者是像现在的DVD播放器，你可以在他们内部走动，然后阅读他们。但是文件对象并不是文件的文本内容一样就好像DVD播放器也不是一个DVD视频.</p>
</blockquote>
<h3 id="Q-我不能按照你在附加题7中说的那样在命令行输入代码"><a href="#Q-我不能按照你在附加题7中说的那样在命令行输入代码" class="headerlink" title="Q:我不能按照你在附加题7中说的那样在命令行输入代码"></a>Q:我不能按照你在附加题7中说的那样在命令行输入代码</h3><blockquote>
<p>首先，在命令行里输入<code>python</code>并回车，现在你已经进入了一个python解析器。接下来你就可以输入一系列的代码，python会一一执行你的代码。最后别忘了输入<code>quit()</code>并回车退出python。</p>
</blockquote>
<h3 id="Q-当我打开同一个文件两次的时候，为什么不会报错？"><a href="#Q-当我打开同一个文件两次的时候，为什么不会报错？" class="headerlink" title="Q:当我打开同一个文件两次的时候，为什么不会报错？"></a>Q:当我打开同一个文件两次的时候，为什么不会报错？</h3><blockquote>
<p>Python不会限制你只能打开一个文件一次,有时这是必要的。</p>
</blockquote>
<h3 id="Q-from-sys-import-argv-这句是什么意思"><a href="#Q-from-sys-import-argv-这句是什么意思" class="headerlink" title="Q:from sys import argv 这句是什么意思?"></a>Q:<code>from sys import argv</code> 这句是什么意思?</h3><blockquote>
<p>目前来说，你可以认为<code>sys</code>是一个包，这句代码的意思是从<code>sys</code>的包中引入<code>argv</code>功能模块。</p>
</blockquote>
<h3 id="Q-我把文件的名字放进脚本中，ex15-sample-txt-argv，却没有生效。"><a href="#Q-我把文件的名字放进脚本中，ex15-sample-txt-argv，却没有生效。" class="headerlink" title="Q: 我把文件的名字放进脚本中，ex15_sample.txt = argv，却没有生效。"></a>Q: 我把文件的名字放进脚本中，<code>ex15_sample.txt = argv</code>，却没有生效。</h3><blockquote>
<p>你不能这么写，请按照我的示例写代码，并像我一样在命令行里运行脚本。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise14" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise14/" class="article-date">
  	<time datetime="2014-11-22T07:31:20.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise14/">笨办法学Python--exercise14.提示和传递</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这节练习让我们使用<code>argv</code>和 <code>raw_input</code>一起来向用户提一些特别的问题。下一节习题你会学习如何读写文件，这节练习是下节的基础。在这道习题里我们将用略微不同的方法使用 <code>raw_input</code>，让它打出一个简单的 <code>&gt;</code> 作为提示符。这和一些游戏中的方式类似，例如 Zork 或者 Adventure 这两款游戏。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">script, user_name = argv</span><br><span class="line">prompt = <span class="string">'&gt; '</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Hi %s, I'm the %s script."</span> % (user_name, script)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"I'd like to ask you a few questions."</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Do you like me %s?"</span> % user_name</span><br><span class="line">likes = raw_input(prompt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Where do you live %s?"</span> % user_name</span><br><span class="line">lives = raw_input(prompt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"What kind of computer do you have?"</span></span><br><span class="line">computer = raw_input(prompt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"""</span><br><span class="line">Alright, so you said %r about liking me.</span><br><span class="line">You live in %r.  Not sure where that is.</span><br><span class="line">And you have a %r computer.  Nice.</span><br><span class="line">"""</span> % (likes, lives, computer)</span><br></pre></td></tr></table></figure>
<p>我们将用户提示符设置为变量 <code>prompt</code>，这样我们就不需要在每次用到 <code>raw_input</code> 时重复输入提示用户的字符了。而且如果你要将提示符修改成别的字串，你只要改一个位置就可以了。</p>
<p>是不是非常方便？</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>当你运行这个脚本时，记住你需要把你的名字赋给这个脚本，让 argv 参数接收到你的名称。</p>
<pre><code>$ python ex14.py zed
Hi zed, I&apos;m the ex14.py script.
I&apos;d like to ask you a few questions.
Do you like me zed?
&gt;  Yes
Where do you live zed?
&gt;  San Francisco
What kind of computer do you have?
&gt;  Tandy 1000

Alright, so you said &apos;Yes&apos; about liking me.
You live in &apos;San Francisco&apos;.  Not sure where that is.
And you have a &apos;Tandy 1000&apos; computer.  Nice.
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>查一下 Zork 和 Adventure是两个怎样的游戏。看看能不能下载到一版，然后玩玩看。</li>
<li>将 <code>prompt</code> 变量改成完全不同的内容再运行一遍。</li>
<li>给你的脚本再添加一个参数，让你的程序用到这个参数，像你在上一个练习中用到的解包操作<code>first, second = ARGV</code>。</li>
<li>确认你弄懂了三个引号 <code>&quot;&quot;&quot;</code> 可以定义多行字符串，而 <code>%</code> 是字符串的格式化工具。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-我遇到一个报错SyntaxError-invalid-syntax"><a href="#Q-我遇到一个报错SyntaxError-invalid-syntax" class="headerlink" title="Q:我遇到一个报错SyntaxError:invalid syntax."></a>Q:我遇到一个报错<code>SyntaxError:invalid syntax</code>.</h3><blockquote>
<p>重申一遍，你要在命令行里执行脚本，而不是在Python的解释器里。如果在python解析器里再输入<code>python ex14.py Zed</code> 一定会出错的，因为你是在Python里运行Python脚本了。</p>
</blockquote>
<h3 id="Q-我不太明白你说的改变变量prompt的值"><a href="#Q-我不太明白你说的改变变量prompt的值" class="headerlink" title="Q:我不太明白你说的改变变量prompt的值?"></a>Q:我不太明白你说的改变变量<code>prompt</code>的值?</h3><blockquote>
<p>看到代码的这句了么<code>prompt = &#39;&gt; &#39;</code>，改变它的值就是让你修改 <code>prompt</code> 为一个不同 于<code>&gt;</code> 的值，只是修改一个字符串而已，你已经做过13个练习题，这次试试看自己解决这个问题。</p>
</blockquote>
<h3 id="Q-我遇到一个错误信息need-more-than-1-value-to-unpack"><a href="#Q-我遇到一个错误信息need-more-than-1-value-to-unpack" class="headerlink" title="Q:我遇到一个错误信息need more than 1 value to unpack."></a>Q:我遇到一个错误信息<code>need more than 1 value to unpack</code>.</h3><blockquote>
<p>看看“你看到的结果”这部分，并且看看我是怎么运行脚本的。你应该注意我是如何输入命令的，为什么我输入了一个命令行参数？</p>
</blockquote>
<h3 id="Q-怎样在IDLE运行程序"><a href="#Q-怎样在IDLE运行程序" class="headerlink" title="Q:怎样在IDLE运行程序?"></a>Q:怎样在IDLE运行程序?</h3><blockquote>
<p>不要用IDLE，现在只用文本编辑器就够了。</p>
</blockquote>
<h3 id="Q-我能给变量prompt用双引号吗？"><a href="#Q-我能给变量prompt用双引号吗？" class="headerlink" title="Q:我能给变量prompt用双引号吗？"></a>Q:我能给变量<code>prompt</code>用双引号吗？</h3><blockquote>
<p>当然可以，尽管试试看。</p>
</blockquote>
<h3 id="Q-我遇到一个明明错误-name-39-prompt-39-is-not-defined"><a href="#Q-我遇到一个明明错误-name-39-prompt-39-is-not-defined" class="headerlink" title="Q:我遇到一个明明错误: name &#39;prompt&#39; is not defined."></a>Q:我遇到一个明明错误: <code>name &#39;prompt&#39; is not defined</code>.</h3><blockquote>
<p>你可能是拼写错了prompt或者是丢掉了代码的那一行。逐行对比下你和我的代码那里不一样。你遇到这类错误意味着你有拼写错误或者你根本没有定义这个变量。 </p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise13" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/22/learn-python-the-hard-way-exercise13/" class="article-date">
  	<time datetime="2014-11-22T05:14:27.000Z" itemprop="datePublished">2014-11-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/22/learn-python-the-hard-way-exercise13/">笨办法学Python--exercise13.参数, 解包, 变量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在这节练习中，我们将学到另外一种将变量传递给脚本的方法(脚本就是你写的 <code>.py</code> 程序)。你已经知道，如果要运行 <code>ex13.py</code>，只要在命令行运行 <code>python ex13.py</code> 就可以了。这句命令中的 <code>ex13.py</code> 部分就是所谓的“参数(argument)”，我们现在要做的就是写一个可以接收参数的脚本。</p>
<p>将下面的程序写下来，后面你会看到详细的解释：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">script, first, second, third = argv</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"The script is called:"</span>, script</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Your first variable is:"</span>, first</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Your second variable is:"</span>, second</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Your third variable is:"</span>, third</span><br></pre></td></tr></table></figure></p>
<p>第一行代码中，我们用到一个<code>import</code>语句，这是将Python的功能模块加入你自己脚本的方法。Python 不会一下子将它所有的功能提供给你，而是让你需要什么就调用什么。这样可以让你的程序更加精简，而后面的程序员看到你的代码的时候，这些“import”语句可以作为提示，让他们明白你的代码用到了哪些功能。</p>
<p><code>argv</code>就是所谓的“参数变量(argument variable)”，它是一个非常标准的编程术语。在其他的编程语言里你也可以看到它。这个变量包含了你传递给 Python 的参数。通过后面的练习你将对它有更多的了解。</p>
<p>代码的第3行将 <code>argv</code>进行“解包(unpack)”，与其将所有参数放到同一个变量下面，我们将每个参数赋予一个变量名： script, first, second, 以及 third。这也许看上去有些奇怪,不过”解包”可能是最好的描述方式了。它的含义很简单：“把 argv 中的东西解包，将所有的参数依次赋予左边的变量名”。</p>
<p>接下来，就是正常的打印输出了。</p>
<h2 id="等一下-功能还有另外一个名字"><a href="#等一下-功能还有另外一个名字" class="headerlink" title="等一下! 功能还有另外一个名字"></a>等一下! 功能还有另外一个名字</h2><p>前面我们使用<code>import</code>让你的程序实现更多的功能，把<code>import</code>称为“功能”。我希望你可以在没接触到正式术语的时候就弄懂它的功能。在继续下去之前, 你需要知道它们的真正名称：模块(modules)。</p>
<p>从现在开始我们将把这些我们导入(import)进来的功能称作模块。你将看到类似这样的说法：“你需要把sys模块import进来。”也有人将它们称作“库(libraries)”，不过我们还是叫它们模块吧。</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>像下面的示例一样将你的脚本运行起来（你必须在命令行里传递3个参数）：</p>
<pre><code>$ python ex13.py first 2nd 3rd
The script is called: ex13.py
Your first variable is: first
Your second variable is: 2nd
Your third variable is: 3rd
</code></pre><p>如果你每次输入的参数不一样，那你看到的输出结果也会略有不同：</p>
<pre><code>$ python ex13.py stuff things that
The script is called: ex13.py
Your first variable is: stuff
Your second variable is: things
Your third variable is: that
$
$ python ex13.py apple orange grapefruit
The script is called: ex13.py
Your first variable is: apple
Your second variable is: orange
Your third variable is: grapefruit
</code></pre><p>你可以将<code>first</code>, <code>2nd</code>, 和 <code>3rd</code> 替换成任意你喜欢的3个参数</p>
<p>如果你没有运行对，你可能会看到的错误信息：</p>
<pre><code>$ python ex13.py first 2nd
Traceback (most recent call last):
  File &quot;ex13.py&quot;, line 3, in &lt;module&gt;
    script, first, second, third = argv
ValueError: need more than 3 values to unpack
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>给你的脚本三个以下的参数。看看会得到什么错误信息。试着解释一下。</li>
<li>再写两个脚本，其中一个接受更少的参数，另一个接受更多的参数，在参数解包时给它们取一些有意义的变量名。</li>
<li>将 <code>raw_input</code> 和 <code>argv</code> 一起使用，让你的脚本从用户手上得到更多的输入。</li>
<li>记住“模块(modules)”为你提供额外功能。多读几遍把这个词记住，因为我们后面还会用到它。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-当我运行脚本的时候，有个报错-need-more-than-1-value-to-unpack"><a href="#Q-当我运行脚本的时候，有个报错-need-more-than-1-value-to-unpack" class="headerlink" title="Q:当我运行脚本的时候，有个报错: need more than 1 value to unpack."></a>Q:当我运行脚本的时候，有个报错: <code>need more than 1 value to unpack</code>.</h3><blockquote>
<p>一定记住，关注细节是学习编程的三要素之一。如果你仔细看了我是如何在命令行运行脚本的，你也能把你的脚本正确的运行起来。</p>
</blockquote>
<h3 id="Q-argv-和-raw-input-有什么区别"><a href="#Q-argv-和-raw-input-有什么区别" class="headerlink" title="Q:argv 和 raw_input()有什么区别?"></a>Q:<code>argv</code> 和 <code>raw_input()</code>有什么区别?</h3><blockquote>
<p>它们的不同之处在于要求用户输入的位置不同。如果你想让用户在命令行输入你的参数，你应该使用<code>argv</code>.，如果你希望用户在脚本执行的过程中输入参数，那就就要用到<code>raw_input()</code>。</p>
</blockquote>
<h3 id="Q-命令行输入的参数是字符串吗"><a href="#Q-命令行输入的参数是字符串吗" class="headerlink" title="Q:命令行输入的参数是字符串吗?"></a>Q:命令行输入的参数是字符串吗?</h3><blockquote>
<p>是的，如果你需要输入数字，可以使用<code>int()</code>把他们转化成整数，可以参考 <code>int(raw_input())</code>.</p>
</blockquote>
<h3 id="Q-如何使用命令行"><a href="#Q-如何使用命令行" class="headerlink" title="Q:如何使用命令行?"></a>Q:如何使用命令行?</h3><blockquote>
<p>通过这节练习，你其实已经快速的学会如何使用命令行了，如果在此阶段你想深入学习的话，你可以阅读这本书的附录A–命令行速成教程。</p>
</blockquote>
<h3 id="Q-我不知道怎样把argv-和-raw-input-结合起来使用"><a href="#Q-我不知道怎样把argv-和-raw-input-结合起来使用" class="headerlink" title="Q: 我不知道怎样把argv 和 raw_input()结合起来使用."></a>Q: 我不知道怎样把<code>argv</code> 和 <code>raw_input()</code>结合起来使用.</h3><blockquote>
<p>不要想太多. 用<code>raw_input()</code>修改脚本后面的两行代码，然后打印输出就行。然后试试用更多的方式来同时使用这两种方法修改脚本。</p>
</blockquote>
<h3 id="Q-为什么我不能这么写raw-input-39-39-x"><a href="#Q-为什么我不能这么写raw-input-39-39-x" class="headerlink" title="Q:为什么我不能这么写raw_input(&#39;? &#39;) = x?"></a>Q:为什么我不能这么写<code>raw_input(&#39;? &#39;) = x</code>?</h3><blockquote>
<p>因为这种写法正好是将它正常运行方法的逆序，按照我的写法修改，就能正常运行了。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 flyouting and shirley
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>