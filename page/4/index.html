<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>flyouting and shirley</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="flyouting and shirley">
<meta property="og:url" content="http://coofee.me/page/4/index.html">
<meta property="og:site_name" content="flyouting and shirley">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="flyouting and shirley">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="flyouting and shirley" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://ww2.sinaimg.cn/small/4a242739gw1eu09kkcr5xj2050050glt.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">flyouting and shirley</a></h1>
		</hgroup>

		
		<p class="header-subtitle">记录一点一滴</p>
		

		<!--
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		-->

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">首页</a></li>
				        
							<li><a href="/archives">文章列表</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/flyouting" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/flyouting" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/flyouting" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="mailto:flyouting@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				<div class="switch-part switch-part2"><script>var n ='b-26003349-pe-f-801';var ch ='pc_6'; var w1 = 200;var h1 = 280;</script> <script src='http://static.luna.58.com/js/mad.js'></script></div>
				
				<!--
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AndroidStudio/" style="font-size: 10px;">AndroidStudio</a> <a href="/tags/DB/" style="font-size: 12.5px;">DB</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/ImageSpan/" style="font-size: 10px;">ImageSpan</a> <a href="/tags/ORM/" style="font-size: 12.5px;">ORM</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/activeandroid/" style="font-size: 10px;">activeandroid</a> <a href="/tags/android/" style="font-size: 17.5px;">android</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/key/" style="font-size: 10px;">key</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/span/" style="font-size: 10px;">span</a> <a href="/tags/transitions/" style="font-size: 10px;">transitions</a> <a href="/tags/volley/" style="font-size: 15px;">volley</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/后台，多线程/" style="font-size: 10px;">后台，多线程</a> <a href="/tags/相机/" style="font-size: 15px;">相机</a> <a href="/tags/终端/" style="font-size: 10px;">终端</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
					</div>
				</section>
				-->
				
				<!--
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				-->
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">flyouting and shirley</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://ww2.sinaimg.cn/small/4a242739gw1eu09kkcr5xj2050050glt.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">flyouting and shirley</h1>
			</hgroup>
			
			<p class="header-subtitle">记录一点一滴</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">首页</a></li>
		        
					<li><a href="/archives">文章列表</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/flyouting" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/flyouting" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/flyouting" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="mailto:flyouting@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-learn-python-the-hard-way-exercise43" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise43/" class="article-date">
  	<time datetime="2014-11-29T14:11:18.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise43/">笨办法学Python--exercise43.基本的面向对象的分析和设计</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在这节练习，我想给你介绍一个使用python创建某类东西的过程，也就是“面向对象编程”（OOP）。我把它叫做一个过程，是因为我将给出一系列按顺序进行的步骤，但是你也不应该死板的遵循这个步骤，企图用它解决所有难题。它们对于许多编程问题只是一个良好的开头，而不应该被认为是解决这些问题的唯一方法。这个过程只是一个你可以遵循的方法：</p>
<blockquote>
<ol>
<li>写出或画出你的问题</li>
<li>从1中提炼关键问题并搜索相关资料</li>
<li>为2中的问题创建一个有层次结构的类和对象映射 </li>
<li>编写类和测试代码，并保证他们运行</li>
<li>重复并精炼</li>
</ol>
</blockquote>
<p>按照这个顺序执行流程，叫做“自顶向下”的方式，意思是说，它从非常抽象宽松的想法开始，然后慢慢提炼，直到想法是坚实的东西，然后你再开始编码。</p>
<p>首先我只是写出这个问题，并试图想出任何我想要的东西就可以了。也许我会画一两个图表，或者某种可能的地图，甚至给自己写了一系列的电子邮件描述这个问题。这给了我表达了问题的关键概念的方法，并探测出我对于这个游戏有什么具体的想法和了解。</p>
<p>接下来，我浏览这些笔记，图表以及描述，通过这些记录我找到我需要的关键问题点。有一个简单的技巧：简单地列出你的笔记和图表中所有的名词和动词,然后写出他们是如何相关的。这一步其实也我为我下一步要写的类、对象、以及函数等提供了命名列表。我利用这个概念列表，研究任何我不明白的地方，如果我需要，我还可以进一步完善它们。</p>
<p>一旦我完成这个列表，我可以创建的一个简单的轮廓/树用来说明这些概念之间的关系。你还可以对着你的名词列表并询问“这个名词和其他的是一个概念吗？或者它们有一个通用的父类吗，那它们的父类是什么？”持续检查，直到你得到一个有层次结构的类，它应该像一棵简单的树或者图表。然后检查你的动词列表，看它们是否可以作为函数的名字添加到你的类树种。</p>
<p>随着这棵类树的生成，我坐下来写一些基本的框架代码，代码中只包括刚才提到的类，类中包含的函数。然后我再写一个测试用例，用来检验我刚才写的类是正确的。有时候我可能只需要在开始写一段测试代码，但是更多的时候，我需要写一段测试，再写一段代码，再写一段测试…直到整个项目完成。</p>
<p>最后，在我完成更多的工作之前，我周期性的重复和精炼这个流程，是他变得清楚和易于理解。如果我在一个没有预料到的地方被一些概念或问题卡住，我会停下来在这一小部分上投入更大的精力来分析解决，直到我解决了这问题，再继续下去。</p>
<p>这节练习中，我将通过建造一个游戏引擎带大家学习这一流程。</p>
<h2 id="分析一个简单的游戏引擎"><a href="#分析一个简单的游戏引擎" class="headerlink" title="分析一个简单的游戏引擎"></a>分析一个简单的游戏引擎</h2><p>我打算制作一个叫做 “Gothons from Planet Percal #25”的游戏，这个一个小型的太空冒险游戏。</p>
<h3 id="写或画出这个问题"><a href="#写或画出这个问题" class="headerlink" title="写或画出这个问题"></a>写或画出这个问题</h3><p>我为这个游戏写了一小段描述：</p>
<p>“外星人乘坐一个宇宙飞船入侵,我们的英雄需要通过一个迷宫似的房间击败他们,然后他才能逃入一个逃生舱到达下面的行星。游戏将更像一个有着文本输出和有趣的死法的Zork或冒险类型游戏。游戏将包括一个引擎运行充满房间或场景的地图。 当玩家进入房间，每个房间将打印自己的描述,然后告诉引擎运行下一个地图。”</p>
<p>我先描述每个场景：</p>
<p>Death<br>:   这是玩家死亡的场景，应该是有趣的。</p>
<p>Central Corridor<br>:   这是游戏的起点，在这里已经有一个外星人等待英雄的到来，它们需要被一个玩笑打败。</p>
<p>Laser Weapon Armory<br>:   这是英雄得到了中子弹获得的逃生舱之前要炸毁的船。它有一个需要英雄猜数的键盘。</p>
<p>The Bridge<br>:   和外星人战斗的另一个场景，英雄防止炸弹的地方。</p>
<p>Escape Pod<br>:   英雄逃脱的场景，但是需要英雄找对正确的逃生舱</p>
<p>现在，我可以绘制出它们的地图，或者对每个房间再多写一些描述，或者其他一些我脑中出现的想法。</p>
<h3 id="提取关键概念并研究他们"><a href="#提取关键概念并研究他们" class="headerlink" title="提取关键概念并研究他们"></a>提取关键概念并研究他们</h3><p>现在我已经有足够多的信息还提取出名词，并分析它们的类结构。首先我列出所有的名词：</p>
<blockquote>
<ul>
<li>Alien</li>
<li>Player</li>
<li>Ship</li>
<li>Maze</li>
<li>Room</li>
<li>Scene</li>
<li>Gothon</li>
<li>Escape Pod</li>
<li>Planet</li>
<li>Map</li>
<li>Engine</li>
<li>Death</li>
<li>Central Corridor</li>
<li>Laser Weapon Armory</li>
<li>The Bridge</li>
</ul>
</blockquote>
<p>我也可能要列出所有的动词，看它们能否作为函数的名字，不过现在我要先跳过这一步。</p>
<p>你需要研究所有你现在还不知道的概念。例如，我可能会玩几个这种类型的游戏，并确保知道他们是如何工作的。我可能会研究船舶和炸弹的设计和工作原理。也许我会研究怎么样将游戏中的数据或状态存储在数据库等一些技术上的问题。我做完这个研究之后，我可能会回到第1步重新开始，根据新的信息，重写描述和提取新的概念。</p>
<h3 id="创建一个层次结构的类和对象映射的概念"><a href="#创建一个层次结构的类和对象映射的概念" class="headerlink" title="创建一个层次结构的类和对象映射的概念"></a>创建一个层次结构的类和对象映射的概念</h3><p>当我完成上面的步骤，我通过思考“哪些是类似于其他东西的”，把名词列表转换成一个有层次结构的类树，同样，我也会思考，哪些单词是其他东西的基础呢？</p>
<p>马上我发现，”Room” 和 “Scene”对于我要做的事情来说基本上是一样的事情。在这个游戏中，我选择使用”Scene” 。接下来我发现，所有的特殊房间比如”Central Corridor”基本上也跟”Scene”是一样的。我发现”Death”也是一个”Scene”, 由于我选择了”Scene”而不是”Room”，你可以有一个“死亡场景”，而是不一个很奇怪的“死亡房间”。”Maze”和”Map”基本一样，所以我选择使用”Map”，因为我更多的时候都用它。我不想做一个战斗系统，所以我会先忽略”Alien”和 “Player”，但是会把他们保存下来以供以后使用。”Planet”也可能仅仅是另一个场景，而不是什么具体的事情。</p>
<p>在此之后，我开始创建一个层次结构的类：</p>
<blockquote>
<ul>
<li>Map</li>
<li>Engine</li>
<li>Scene<ul>
<li>Death</li>
<li>Central Corridor</li>
<li>Laser Weapon Armory</li>
<li>The Bridge</li>
<li>Escape Pod</li>
</ul>
</li>
</ul>
</blockquote>
<p>然后，我会找出说明中每个动词都需要什么行动。比如，我从说明中得知，我需要一个方法来”run”这个引擎，通过地图获得下一个场景”get the next scene”，获得”opening scene”，或者”enter”一个场景。我把这些加到类树里：</p>
<blockquote>
<ul>
<li>Map<br>- next_scene<br>- opening_scene</li>
<li>Engine<br>- play</li>
<li>Scene<br>- enter<br>* Death<br>* Central Corridor<br>* Laser Weapon Armory<br>* The Bridge<br>* Escape Pod</li>
</ul>
</blockquote>
<p>注意一下，我只是把<code>-enter</code>放到<code>Scene</code>下面，因为我知道所有的场景都会继承它并重写它。</p>
<h3 id="编码类和测试代码并运行它们"><a href="#编码类和测试代码并运行它们" class="headerlink" title="编码类和测试代码并运行它们"></a>编码类和测试代码并运行它们</h3><p>当我有了这个类树和一些功能之后，我在编辑器中打开源文件，并尝试编写代码。通常，我会复制粘贴这棵类树到源文件中，然后编辑它。下面是一个如何编码的小例子，文件末尾包含一个简单的测试用例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scene</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Engine</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, scene_map)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">play</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Death</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CentralCorridor</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LaserWeaponArmory</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TheBridge</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EscapePod</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Map</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start_scene)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next_scene</span><span class="params">(self, scene_name)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">opening_scene</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a_map = Map(<span class="string">'central_corridor'</span>)</span><br><span class="line">a_game = Engine(a_map)</span><br><span class="line">a_game.play()</span><br></pre></td></tr></table></figure>
<p>在这个文件中，你可以看到我只是复制了我想要的层次结构,然后一点点的补齐代码再运行它,看看它在这个基本结构中是否运行顺利。 在这节练习后面的部分，你会填补这段代码的其余部分，使其正常工作，以配合练习开头的游戏描述。</p>
<h3 id="重复并精炼"><a href="#重复并精炼" class="headerlink" title="重复并精炼"></a>重复并精炼</h3><p>在我提供的流程中，最后一步并不是实际意义上的一步，而是要做一个循环。在编程的世界里，你永远做不到一次通过，相反，你退回整个过程，并再次根据你从后面的步骤中了解到的信息完善它。有时候我已经到了第3步，但是我发现我还需要在第1、2步做更多工作，我会停下来并返回去完善它。有时候我也会突然灵光一闪，跳到最后，用我脑子里更好的解决方案编码实现，但是之后，我仍然会回去完成前面的步骤，以确保我的工作覆盖了所有的可能性。</p>
<p>在这一过程的另一个观点是，你不是仅在一个层面上使用这个流程，当你遇到某些特定问题的时候，你可以在任意一个层级上使用该流程。比方说，我不知道如何写<code>Engine.play</code>方法，我可以静下心来用这个流程只做这一种功能，直到弄清楚这个方法怎么写。</p>
<h2 id="自顶向下和自下而上"><a href="#自顶向下和自下而上" class="headerlink" title="自顶向下和自下而上"></a>自顶向下和自下而上</h2><p>因为这个流程在最抽象的概念（顶部）开始，然后再下降到实际执行过程中，因此这一流程通常标示为“自上而下”。我希望你使用这一流程，但你也应该知道，还有另一种方式来解决程序中的问题，这种方式是从代码开始，再“上升”到抽象的概念问题。这种方式被称为“自下而上”。下面是自下而下方式所遵循的步骤：</p>
<blockquote>
<ol>
<li>取一小块问题，编写一些代码，并让他勉强运行</li>
<li>完善代码，将其转换成一些更正式的包含类和自动化测试的代码。</li>
<li>提取其中的关键概念，并尝试找出研究他们。</li>
<li>写出到底发生了什么的描述。</li>
<li>继续完善代码，也可能是把它扔掉，并重新开始。</li>
<li>移动到其他问题上，重复步骤。</li>
</ol>
</blockquote>
<p>当你需要更优质的代码，并在代码中更自然的思考你要解决的问题时，这种方式更好一些。尤其是当你知道小块的难题,但没有足够的信息把握整个概念的时候，这个方式是一个解决问题很好的办法。将问题分解成碎片并探索代码,直到你解决这个问题。然而，你解决问题的途径可能是缓慢而曲折的，所以，我的这一流程中也包含后退并反复研究问题，直到你通过自己所为解决所有难题。</p>
<h2 id="“来自-Percal-25-号行星的哥顿人”的代码"><a href="#“来自-Percal-25-号行星的哥顿人”的代码" class="headerlink" title="“来自 Percal 25 号行星的哥顿人”的代码"></a>“来自 Percal 25 号行星的哥顿人”的代码</h2><p>我要告诉你我解决上述问题的最终办法,但我不希望你只是直接跳到这里并输入代码。我希望你能通过我的描述，完成我写的那个简单粗糙的代码框架，并让他运行起来。当你有了自己的解决方案时，你可以回来看看我是怎么解决的。</p>
<p>我准备把文件<code>ex43.py</code>拆成小块，再一一解释，而不是一次性提供完整的代码。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> exit</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br></pre></td></tr></table></figure></p>
<p>这只是我们游戏需要导入的包，没什么新奇的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scene</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"This scene is not yet configured. Subclass it and implement enter()."</span></span><br><span class="line">        exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>正如你在框架代码里看到的，我创建了基础类<code>Scene</code>,它将包含所有scene要做的所有的事。在这段代码中，它们并没有做什么，所以这只是给你的一个如果创建基类的示范。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Engine</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, scene_map)</span>:</span></span><br><span class="line">        self.scene_map = scene_map</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">play</span><span class="params">(self)</span>:</span></span><br><span class="line">        current_scene = self.scene_map.opening_scene()</span><br><span class="line">        last_scene = self.scene_map.next_scene(<span class="string">'finished'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> current_scene != last_scene:</span><br><span class="line">            next_scene_name = current_scene.enter()</span><br><span class="line">            current_scene = self.scene_map.next_scene(next_scene_name)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># be sure to print out the last scene</span></span><br><span class="line">        current_scene.enter()</span><br></pre></td></tr></table></figure>
<p>我同样创建了类<code>Engine</code>，并且你能看到我已经使用了方法<code>Map.opening_scene</code> 和 <code>Map.next_scene</code>。因为在我写<code>Map</code>类之前，做了一点计划，我可以假设我后面会写这些,然后提前使用它们。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Death</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    quips = [</span><br><span class="line">        <span class="string">"You died.  You kinda suck at this."</span>,</span><br><span class="line">         <span class="string">"Your mom would be proud...if she were smarter."</span>,</span><br><span class="line">         <span class="string">"Such a luser."</span>,</span><br><span class="line">         <span class="string">"I have a small puppy that's better at this."</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> Death.quips[randint(<span class="number">0</span>, len(self.quips)<span class="number">-1</span>)]</span><br><span class="line">        exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>我的第一个场景是一个叫做<code>Death</code>的场景，它给你展现了你能写的最简单的场景。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CentralCorridor</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"The Gothons of Planet Percal #25 have invaded your ship and destroyed"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"your entire crew.  You are the last surviving member and your last"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"mission is to get the neutron destruct bomb from the Weapons Armory,"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"put it in the bridge, and blow the ship up after getting into an "</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"escape pod."</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"\n"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You're running down the central corridor to the Weapons Armory when"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"flowing around his hate filled body.  He's blocking the door to the"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Armory and about to pull a weapon to blast you."</span></span><br><span class="line"></span><br><span class="line">        action = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> action == <span class="string">"shoot!"</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Quick on the draw you yank out your blaster and fire it at the Gothon."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"His clown costume is flowing and moving around his body, which throws"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"off your aim.  Your laser hits his costume but misses him entirely.  This"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"completely ruins his brand new costume his mother bought him, which"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"makes him fly into an insane rage and blast you repeatedly in the face until"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"you are dead.  Then he eats you."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'death'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> action == <span class="string">"dodge!"</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Like a world class boxer you dodge, weave, slip and slide right"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"as the Gothon's blaster cranks a laser past your head."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"In the middle of your artful dodge your foot slips and you"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"bang your head on the metal wall and pass out."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You wake up shortly after only to die as the Gothon stomps on"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"your head and eats you."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'death'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> action == <span class="string">"tell a joke"</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Lucky for you they made you learn Gothon insults in the academy."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You tell the one Gothon joke you know:"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The Gothon stops, tries not to laugh, then busts out laughing and can't move."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"While he's laughing you run up and shoot him square in the head"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"putting him down, then jump through the Weapon Armory door."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'laser_weapon_armory'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"DOES NOT COMPUTE!"</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'central_corridor'</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，我创建了<code>CentralCorridor</code>，这是游戏的开始。我在写<code>Map</code>之前，为游戏制作了这个场景，是因为我后面要引用它们。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LaserWeaponArmory</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You do a dive roll into the Weapon Armory, crouch and scan the room"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"for more Gothons that might be hiding.  It's dead quiet, too quiet."</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You stand up and run to the far side of the room and find the"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"neutron bomb in its container.  There's a keypad lock on the box"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"and you need the code to get the bomb out.  If you get the code"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"wrong 10 times then the lock closes forever and you can't"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"get the bomb.  The code is 3 digits."</span></span><br><span class="line">        code = <span class="string">"%d%d%d"</span> % (randint(<span class="number">1</span>,<span class="number">9</span>), randint(<span class="number">1</span>,<span class="number">9</span>), randint(<span class="number">1</span>,<span class="number">9</span>))</span><br><span class="line">        guess = raw_input(<span class="string">"[keypad]&gt; "</span>)</span><br><span class="line">        guesses = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> guess != code <span class="keyword">and</span> guesses &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"BZZZZEDDD!"</span></span><br><span class="line">            guesses += <span class="number">1</span></span><br><span class="line">            guess = raw_input(<span class="string">"[keypad]&gt; "</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> guess == code:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The container clicks open and the seal breaks, letting gas out."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You grab the neutron bomb and run as fast as you can to the"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"bridge where you must place it in the right spot."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'the_bridge'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The lock buzzes one last time and then you hear a sickening"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"melting sound as the mechanism is fused together."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You decide to sit there, and finally the Gothons blow up the"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"ship from their ship and you die."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'death'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TheBridge</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You burst onto the Bridge with the netron destruct bomb"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"under your arm and surprise 5 Gothons who are trying to"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"take control of the ship.  Each of them has an even uglier"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"clown costume than the last.  They haven't pulled their"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"weapons out yet, as they see the active bomb under your"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"arm and don't want to set it off."</span></span><br><span class="line"></span><br><span class="line">        action = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> action == <span class="string">"throw the bomb"</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"In a panic you throw the bomb at the group of Gothons"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"and make a leap for the door.  Right as you drop it a"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Gothon shoots you right in the back killing you."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"As you die you see another Gothon frantically try to disarm"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"the bomb. You die knowing they will probably blow up when"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"it goes off."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'death'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> action == <span class="string">"slowly place the bomb"</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You point your blaster at the bomb under your arm"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"and the Gothons put their hands up and start to sweat."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You inch backward to the door, open it, and then carefully"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"place the bomb on the floor, pointing your blaster at it."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You then jump back through the door, punch the close button"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"and blast the lock so the Gothons can't get out."</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Now that the bomb is placed you run to the escape pod to"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"get off this tin can."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'escape_pod'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"DOES NOT COMPUTE!"</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"the_bridge"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EscapePod</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You rush through the ship desperately trying to make it to"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"the escape pod before the whole ship explodes.  It seems like"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"hardly any Gothons are on the ship, so your run is clear of"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"interference.  You get to the chamber with the escape pods, and"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"now need to pick one to take.  Some of them could be damaged"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"but you don't have time to look.  There's 5 pods, which one"</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"do you take?"</span></span><br><span class="line"></span><br><span class="line">        good_pod = randint(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">        guess = raw_input(<span class="string">"[pod #]&gt; "</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> int(guess) != good_pod:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You jump into pod %s and hit the eject button."</span> % guess</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The pod escapes out into the void of space, then"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"implodes as the hull ruptures, crushing your body"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"into jam jelly."</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'death'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"You jump into pod %s and hit the eject button."</span> % guess</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The pod easily slides out into space heading to"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"the planet below.  As it flies to the planet, you look"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"back and see your ship implode then explode like a"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"bright star, taking out the Gothon ship at the same"</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">"time.  You won!"</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="string">'finished'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Finished</span><span class="params">(Scene)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"You won! Good job."</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'finished'</span></span><br></pre></td></tr></table></figure></p>
<p>这是游戏剩下的场景。因为我知道我需要他们，并且已经想好他们应该如何交织在一起，所以我可以直接编码。</p>
<p>顺便说一下，我不是直接输入这些代码。记得我说过的吗，用增量的方法尝试构建所有的代码，一次只写一小部分。我只是给你看了最终的结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Map</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    scenes = &#123;</span><br><span class="line">        <span class="string">'central_corridor'</span>: CentralCorridor(),</span><br><span class="line">        <span class="string">'laser_weapon_armory'</span>: LaserWeaponArmory(),</span><br><span class="line">        <span class="string">'the_bridge'</span>: TheBridge(),</span><br><span class="line">        <span class="string">'escape_pod'</span>: EscapePod(),</span><br><span class="line">        <span class="string">'death'</span>: Death(),</span><br><span class="line">        <span class="string">'finished'</span>: Finished(),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start_scene)</span>:</span></span><br><span class="line">        self.start_scene = start_scene</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next_scene</span><span class="params">(self, scene_name)</span>:</span></span><br><span class="line">        val = Map.scenes.get(scene_name)</span><br><span class="line">        <span class="keyword">return</span> val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">opening_scene</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.next_scene(self.start_scene)</span><br></pre></td></tr></table></figure>
<p>在这之后，我写了<code>Map</code>类，你可以看到它通过名字把所有的场景存在了字典中。我把这个字典叫做<code>Map.scenes</code>。这也是为什么map是在scens之后才写的原因，因为这个字典需要包含所有已存在的场景。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a_map = Map(<span class="string">'central_corridor'</span>)</span><br><span class="line">a_game = Engine(a_map)</span><br><span class="line">a_game.play()</span><br></pre></td></tr></table></figure></p>
<p>最后，我让我的代码通过创建一个<code>Map</code>，并在调用<code>play</code>之前把map交给<code>Engine</code>,把游戏运行起来，</p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>确保你明白这个游戏，并且首先尝试自己解决它。如果你被难住了，可以阅读一小部分我的代码，然后再尝试自己搞定它。</p>
<p>当我运行我的游戏的时候，我可以看到：</p>
<pre><code>$ python ex43.py
The Gothons of Planet Percal #25 have invaded your ship and destroyed
your entire crew.  You are the last surviving member and your last
mission is to get the neutron destruct bomb from the Weapons Armory,
put it in the bridge, and blow the ship up after getting into an
escape pod.


You&apos;re running down the central corridor to the Weapons Armory when
a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume
flowing around his hate filled body.  He&apos;s blocking the door to the
Armory and about to pull a weapon to blast you.
&gt;  dodge!
Like a world class boxer you dodge, weave, slip and slide right
as the Gothon&apos;s blaster cranks a laser past your head.
In the middle of your artful dodge your foot slips and you
bang your head on the metal wall and pass out.
You wake up shortly after only to die as the Gothon stomps on
your head and eats you.
Your mom would be proud...if she were smarter.
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>修改这个游戏！你可能不喜欢这个游戏。让游戏运行起来，然后按照你的喜好修改它。这是你的电脑，你可以用它做你想做的事情</li>
<li>代码中有一个bug，为什么门锁了11次？</li>
<li>解释一下返回至下一个房间的工作原理。</li>
<li>增加作弊代码，这样你能通过一些更难的房间。我能只在一行上加两个单词做到这些。</li>
<li>回到我的描述和分析，尝试为英雄和他遇见的各种哥顿人创建一个小型作战系统。</li>
<li>这其实是一个小版本的“有限状态机(finite state machine)”，找资料阅读了解一下，虽然你可能看不懂，但还是找来看看吧。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-我在哪里可以为我的游戏找到故事情节"><a href="#Q-我在哪里可以为我的游戏找到故事情节" class="headerlink" title="Q: 我在哪里可以为我的游戏找到故事情节"></a>Q: 我在哪里可以为我的游戏找到故事情节</h3><blockquote>
<p>你可以就像给朋友讲述一个故事一样，来创建游戏。或者你可以采取简单的你喜欢的书或电影场景。 </p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise42" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise42/" class="article-date">
  	<time datetime="2014-11-29T13:04:41.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise42/">笨办法学Python--exercise42.对象、类、以及从属关系</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>有一个重要的概念你需要弄明白，那就是“类(class)”和“对象(object)”的区别。问题在于，class 和 object 并没有真正的不同。它们其实是同样的东西，只是在不同的时间名字不同罢了。我用禅语来解释一下吧：</p>
<pre><code>鱼和三文鱼有什么区别？
</code></pre><p>这个问题有没有让你有点晕呢？说真的，坐下来想一分钟。我的意思是说，鱼和三文鱼是不一样，不过它们其实也是一样的是不是？三文鱼是鱼的一种，所以说没什么不同，不过三文鱼又有些特别，它和别的种类的鱼的确不一样，比如三文鱼和大比目鱼就不一样。所以三文鱼和鱼既相同又不同。怪了。</p>
<p>这个问题让人晕的原因是大部分人不会这样去思考问题，其实每个人都懂这一点，你无须去思考鱼和三文鱼的区别，因为你知道它们之间的关系。你知道三文鱼是鱼的一种，而且鱼还有别的种类，根本就没必要去思考这类问题。</p>
<p>让我们更进一步，假设你有一只水桶，里边有三条三文鱼。假设你的好人卡多到没地方用，于是你给它们分别取名叫Frank, Joe,和Mary。现在想想这个问题：</p>
<pre><code>Mary和三文鱼有什么区别？
</code></pre><p>这个问题一样的奇怪，但比起鱼和三文鱼的问题来还好点。你知道Mary是一条三文鱼，所以他并没什么不同，他只是三文鱼的一个“实例(instance)”。Frank和Joe一样也是三文鱼的实例。我的意思是说，它们是由三文鱼创建出来的，而且代表着和三文鱼一样的属性。</p>
<p>所以我们的思维方式是（你可能会有点不习惯）：鱼是一个“类(class)”，三文鱼是一个“类(class)”，而Mary是一个“对象(object)”。仔细想想，然后我再一点一点慢慢解释给你。</p>
<p>鱼是一个“类”，表示它不是一个真正的东西，而是一个用来描述具有同类属性的实例的概括性词汇。 你有鳍？你有鳔？你住在水里？好吧那你就是一条鱼。</p>
<p>后来河蟹养殖专家路过，看到你的水桶，于是告诉你：“小伙子，你这些鱼是三文鱼。” 并且专家还定义了一个新的叫做“三文鱼”的“类”，而这个“类”又有它特定的属性。长鼻子？浅红色的肉？生活在海洋里？吃起来味道还可以？那你就是一条三文鱼。</p>
<p>最后一个厨师过来了，他跟专家说：“非也非也，你看到的是三文鱼，我看到的是Mary，而且我要把Mary和剁椒配一起做一道小菜。”于是你就有了一只叫做Mary的三文鱼的“实例(instance)”（三文鱼也是鱼的一个“实例”），并且你使用了它，这样它就是一个“对象(object)”。</p>
<p>这会你应该了解了：Mary是三文鱼的成员，而三文鱼又是鱼的成员。这里的关系式：对象属于某个类，而某个类又属于另一个类。</p>
<h2 id="写成代码是什么样子"><a href="#写成代码是什么样子" class="headerlink" title="写成代码是什么样子"></a>写成代码是什么样子</h2><p>这个概念有点绕，不过实话说，你只要在创建和使用 class 的时候操心一下就可以了。我来给你两个区分 Class 和 Object 的小技巧。</p>
<p>首先针对类和对象，你需要学会两个说法，“is-a(是啥)”和“has-a(有啥)”。“是啥”要用在谈论“两者以类的关系互相关联”的时候，而“有啥”要用在“两者无共同点，仅是互为参照”的时候。</p>
<p>接下来，通读这段代码，将每一个注释为<code>##</code>?? 的位置标明他是“is-a”还是“has-a”的关系，并讲明白这个关系是什么。在代码的开始我还举了几个例子，所以你只要写剩下的就可以了。</p>
<p>记住，“是啥”指的是鱼和三文鱼的关系，而“有啥”指的是三文鱼和鳃的关系。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Animal is-a object (yes, sort of confusing) look at the extra credit</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="comment">## ??</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="comment">## ??</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="comment">## ??</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">        <span class="comment">## Person has-a pet of some kind</span></span><br><span class="line">        self.pet = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span><span class="params">(Person)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, salary)</span>:</span></span><br><span class="line">        <span class="comment">## ?? hmm what is this strange magic?</span></span><br><span class="line">        super(Employee, self).__init__(name)</span><br><span class="line">        <span class="comment">## ??</span></span><br><span class="line">        self.salary = salary</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salmon</span><span class="params">(Fish)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Halibut</span><span class="params">(Fish)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## rover is-a Dog</span></span><br><span class="line">rover = Dog(<span class="string">"Rover"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">satan = Cat(<span class="string">"Satan"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">mary = Person(<span class="string">"Mary"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">mary.pet = satan</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">frank = Employee(<span class="string">"Frank"</span>, <span class="number">120000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">frank.pet = rover</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">flipper = Fish()</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">crouse = Salmon()</span><br><span class="line"></span><br><span class="line"><span class="comment">## ??</span></span><br><span class="line">harry = Halibut()</span><br></pre></td></tr></table></figure></p>
<h2 id="关于-class-Name-object"><a href="#关于-class-Name-object" class="headerlink" title="关于 class Name(object)"></a>关于 class Name(object)</h2><p>记得我曾经强迫让你使用<code>class Name(object)</code> 却没告诉你为什么吧，现在你已经知道了“类”和“对象”的区别，我就可以告诉你原因了。如果我早告诉你的话，你可能会晕掉，也学不会这门技术了。</p>
<p>真正的原因是在 Python 早期，它对于<code>class</code> 的定义在很多方面都是严重有问题的。当他们承认这一点的时候已经太迟了，所以逼不得已，他们需要支持这种有问题的 <code>class</code>。为了解决已有的问题，他们需要引入一种“新类”，这样的话“旧类”还能继续使用，而你也有一个新的正确的类可以使用了。</p>
<p>这就用到了“类即是对象”的概念。他们决定用小写的“object”这个词作为一个类，让你在创建新类时从它继承下来。有点晕了吧？一个类从另一个类继承，而后者虽然是个类，但名字却叫“object”……不过在定义类的时候，别忘记要从 object 继承就好了。</p>
<p>的确如此。一个词的不同就让这个概念变得更难理解，让我不得不现在才讲给你。现在你可以试着去理解“一个是对象的类”这个概念了，如果你感兴趣的话。</p>
<p>不过我还是建议你别去理解了，干脆完全忘记旧格式和新格式类的区别吧，就假设 Python 的 class 永远都要求你加上 (object) 好了，你的脑力要留着思考更重要的问题。</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>研究一下为什么Python添加了这个奇怪的叫做<code>object</code>的类，它究竟有什么含义呢？</li>
<li>有没有办法把<code>Class</code>当作<code>Object</code>使用呢？</li>
<li>在习题中为 animals、fish、还有 people 添加一些函数，让它们做一些事情。看看当函数在 Animal 这样的“基类(base class)”里和在 Dog 里有什么区别。</li>
<li>找些别人的代码，理清里边的“是啥”和“有啥”的关系。</li>
<li>使用列表和字典创建一些新的一对应多的“has-many”的关系。</li>
<li>你认为会有一种“has-many”的关系吗？阅读一下关于“多重继承(multiple inheritance)”的资料，然后尽量避免这种用法。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-这些注释符-是干什么的？"><a href="#Q-这些注释符-是干什么的？" class="headerlink" title="Q: 这些注释符## ??是干什么的？"></a>Q: 这些注释符<code>## ??</code>是干什么的？</h3><blockquote>
<p>这些是你需要完成的“填空”，你需要填上 “is-a”或者 “has-a”。再读一遍本节练习，看看其他的注释，弄明白我再说什么。</p>
</blockquote>
<h3 id="Q-self-pet-None是什么意思？"><a href="#Q-self-pet-None是什么意思？" class="headerlink" title="Q: self.pet = None是什么意思？"></a>Q: <code>self.pet = None</code>是什么意思？</h3><blockquote>
<p>确保给<code>self.pet</code>设置了一个默认值<code>None</code></p>
</blockquote>
<h3 id="Q-super-Employee-self-init-name-实现了什么？"><a href="#Q-super-Employee-self-init-name-实现了什么？" class="headerlink" title="Q: super(Employee, self).__init__(name)实现了什么？"></a>Q: <code>super(Employee, self).__init__(name)</code>实现了什么？</h3><blockquote>
<p>这是用来执行父类的<code>__init__</code>方法的，上网搜索一下“python super”相关文档，阅读文档的各种建议。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise41" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise41/" class="article-date">
  	<time datetime="2014-11-29T12:41:45.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise41/">笨办法学Python--exercise41.学会说面向对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在这个练习中，我要教你如何说“面向对象”，我要给你一些你需要知道定义的词。然后我会给你一组你必须了解的句子，最后我会给你一大堆练习，你必须完成这练习题，将我给你的句子转化成自己的词汇。</p>
<h2 id="单词解释"><a href="#单词解释" class="headerlink" title="单词解释"></a>单词解释</h2><p>class(类)：告诉python去创建一个新类型。<br>object(对象)：有两种意思，事物的基本类型，或者事物的实例化。<br>instance(实例)：你通过python创建一个类所获得的。<br>def：用来在类中定义一个函数。<br>self：在一个类包含的函数中，self是一个用来访问实例或对象的变量。<br>inheritance：概念，表示一个类可以继承另一个类的特征,就像你和你的父母。<br>composition：概念，表示一个类可以包含其他类,就像汽车轮子。<br>attribute：类所拥有的特性，通常是变量。<br>is-a：惯用语，表示一个东西继承自另一个东西(a),像在“鲑鱼”是“鱼”。<br>has-a：惯用语，表示由其他事情或有一个特征(a),如“鲑鱼有嘴。” </p>
<p>花一些时间制作一些卡片用来记忆这些术语。像往常一样，直到你完成这个练习后，这都不会有太多的意义，但是首先你需要知道的基本词汇。 </p>
<h2 id="短语解释"><a href="#短语解释" class="headerlink" title="短语解释"></a>短语解释</h2><p>接下来,在左边有一个Python代码片段列表，右面是他们的解释<br><code>class X(Y)</code>：创建一个叫X的类，并继承Y。<br><code>class X(object): def __init__(self, J)</code>：类X有一个<code>__init__</code>方法，该方法有self和J两个参数。<br><code>class X(object): def M(self, J)</code>：类X有一个叫M的函数，该函数有self和J两个参数。<br><code>foo = X()</code>：给foo赋值为类X的一个实例。<br><code>foo.M(J)</code>：从foo里调用M函数，传递的参数为self和J。<br><code>foo.K = Q</code>：从foo里调用K属性，并将其设置为Q。</p>
<p>你可以把上面看到的所有的X, Y, M, J, K, Q, 以及 foo 看做空白的坑，比如，我还可以这么写：</p>
<blockquote>
<ol>
<li>创建一个叫？？的类继承Y</li>
<li>类？？有一个<code>__init__</code>方法，该方法有self和？？两个参数。</li>
<li>类？？有一个叫？？的函数，该函数有self和？？两个参数。</li>
<li>给foo赋值为类？？的一个实例。</li>
<li>从foo里调用？？函数，传递的参数为self和？？。</li>
<li>从foo里调用？？属性，并将其设置为？？。</li>
</ol>
</blockquote>
<p>同样的，把这些写到卡片上，牢牢记住它们。卡片的前面写上python的小段代码，背面写上它们的解释，你要做到每当你看到正面的代码段的时候，能立即说出后面的解释。</p>
<h2 id="组合练习"><a href="#组合练习" class="headerlink" title="组合练习"></a>组合练习</h2><p>最后给你准备的是将单词和短语结合起来练习。我希望你能做到下面的要求：</p>
<blockquote>
<ol>
<li>准备好短语的卡片，并拼命的练习</li>
<li>翻转卡片，阅读这些解释语句，挑选出语句中包含单词练习中单词的卡片</li>
<li>通过这些语句拼命练习这些单词</li>
<li>坚持练习，直到你厌烦了，休息一下，然后继续练习</li>
</ol>
</blockquote>
<h2 id="阅读测试"><a href="#阅读测试" class="headerlink" title="阅读测试"></a>阅读测试</h2><p>下面有一个python脚本，这个脚本会以无尽模式训练你，检验你所掌握的这些单词。这是一个很简单的脚本，它实现的功能是使用了一个叫做<code>urllib</code>的类库来下载我提供的单词列表。下面就是这个脚本，你需要正确的输入并命名为<code>oop_test.py</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">WORD_URL = <span class="string">"http://learncodethehardway.org/words.txt"</span></span><br><span class="line">WORDS = []</span><br><span class="line"></span><br><span class="line">PHRASES = &#123;</span><br><span class="line">    <span class="string">"class %%%(%%%):"</span>:</span><br><span class="line">      <span class="string">"Make a class named %%% that is-a %%%."</span>,</span><br><span class="line">    <span class="string">"class %%%(object):\n\tdef __init__(self, ***)"</span> :</span><br><span class="line">      <span class="string">"class %%% has-a __init__ that takes self and *** parameters."</span>,</span><br><span class="line">    <span class="string">"class %%%(object):\n\tdef ***(self, @@@)"</span>:</span><br><span class="line">      <span class="string">"class %%% has-a function named *** that takes self and @@@ parameters."</span>,</span><br><span class="line">    <span class="string">"*** = %%%()"</span>:</span><br><span class="line">      <span class="string">"Set *** to an instance of class %%%."</span>,</span><br><span class="line">    <span class="string">"***.***(@@@)"</span>:</span><br><span class="line">      <span class="string">"From *** get the *** function, and call it with parameters self, @@@."</span>,</span><br><span class="line">    <span class="string">"***.*** = '***'"</span>:</span><br><span class="line">      <span class="string">"From *** get the *** attribute and set it to '***'."</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># do they want to drill phrases first</span></span><br><span class="line"><span class="keyword">if</span> len(sys.argv) == <span class="number">2</span> <span class="keyword">and</span> sys.argv[<span class="number">1</span>] == <span class="string">"english"</span>:</span><br><span class="line">    PHRASE_FIRST = <span class="keyword">True</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    PHRASE_FIRST = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># load up the words from the website</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> urlopen(WORD_URL).readlines():</span><br><span class="line">    WORDS.append(word.strip())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert</span><span class="params">(snippet, phrase)</span>:</span></span><br><span class="line">    class_names = [w.capitalize() <span class="keyword">for</span> w <span class="keyword">in</span></span><br><span class="line">                   random.sample(WORDS, snippet.count(<span class="string">"%%%"</span>))]</span><br><span class="line">    other_names = random.sample(WORDS, snippet.count(<span class="string">"***"</span>))</span><br><span class="line">    results = []</span><br><span class="line">    param_names = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, snippet.count(<span class="string">"@@@"</span>)):</span><br><span class="line">        param_count = random.randint(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">        param_names.append(<span class="string">', '</span>.join(random.sample(WORDS, param_count)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> sentence <span class="keyword">in</span> snippet, phrase:</span><br><span class="line">        result = sentence[:]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># fake class names</span></span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> class_names:</span><br><span class="line">            result = result.replace(<span class="string">"%%%"</span>, word, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># fake other names</span></span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> other_names:</span><br><span class="line">            result = result.replace(<span class="string">"***"</span>, word, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># fake parameter lists</span></span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> param_names:</span><br><span class="line">            result = result.replace(<span class="string">"@@@"</span>, word, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        results.append(result)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># keep going until they hit CTRL-D</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        snippets = PHRASES.keys()</span><br><span class="line">        random.shuffle(snippets)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> snippet <span class="keyword">in</span> snippets:</span><br><span class="line">            phrase = PHRASES[snippet]</span><br><span class="line">            question, answer = convert(snippet, phrase)</span><br><span class="line">            <span class="keyword">if</span> PHRASE_FIRST:</span><br><span class="line">                question, answer = answer, question</span><br><span class="line"></span><br><span class="line">            <span class="keyword">print</span> question</span><br><span class="line"></span><br><span class="line">            raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"ANSWER:  %s\n\n"</span> % answer</span><br><span class="line"><span class="keyword">except</span> EOFError:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"\nBye"</span></span><br></pre></td></tr></table></figure>
<p>运行这个脚本，尝试将这些“面向对象的短语”翻译成自己的语言。你应该能看到字典<code>PHRASES</code>中包含了刚才练习的所有的短语。</p>
<h2 id="练习将英语转换为代码"><a href="#练习将英语转换为代码" class="headerlink" title="练习将英语转换为代码"></a>练习将英语转换为代码</h2><p>接下来，你可以使用”english”选项来执行脚本，这样你可以反过来练习：</p>
<pre><code>$ python oop_test.py english
</code></pre><p>记住这些短语使用的是无意义的词汇。学习阅读代码的一部分是停止纠结这些用于变量和类的名字的真实意义。人们常常会在读到一个像“cork”的词时突然迷糊,因为这个词会混淆他们的意义。在这个例子中，”Cork”只是用来作为一个类的名字。不要给它任何意义的解释。</p>
<h2 id="阅读更多的代码"><a href="#阅读更多的代码" class="headerlink" title="阅读更多的代码"></a>阅读更多的代码</h2><p>你现在需要继续阅读更多的代码，阅读你找到的代码中这些你刚学过的短语表达。你需要找出文件中所有的类，然后执行以下步骤：</p>
<blockquote>
<ol>
<li>给出每一个类的名字，并说出这些类继承哪些类</li>
<li>列出每个类所包含的函数，以及函数需要的参数</li>
<li>列出类所有的属性</li>
<li>对每个属性，给出属性的类型</li>
</ol>
</blockquote>
<p>这个练习的目的是通过阅读真实的代码，学习你刚才学到的短语是如何使用的。如果你练习的足够所，你应该能看到这些模式在代码中向你大声呼喊，然而在这之前，他们是你所不知道的，只是模糊的空白而已。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-这句代码result-sentence-实现了什么"><a href="#Q-这句代码result-sentence-实现了什么" class="headerlink" title="Q: 这句代码result = sentence[:]实现了什么"></a>Q: 这句代码<code>result = sentence[:]</code>实现了什么</h3><blockquote>
<p>这是python中用来复制列表的一种方式。你使用了列表的分割切片语法<code>[:]</code>，得到列表从第一个到最后一个元素的切片。</p>
</blockquote>
<h3 id="Q-这个脚本很难跑起来啊"><a href="#Q-这个脚本很难跑起来啊" class="headerlink" title="Q: 这个脚本很难跑起来啊"></a>Q: 这个脚本很难跑起来啊</h3><blockquote>
<p>你需要输入这些代码并保证它能运行。这个脚本可能会有一些小问题，但是它并不复杂。试着用你到目前为止学到的东西来调试脚本，每输入一行，确认一下是否与我的代码一样，并在网上搜索你所不了解的所有问题。</p>
</blockquote>
<h3 id="Q-这对我来说太难了！"><a href="#Q-这对我来说太难了！" class="headerlink" title="Q: 这对我来说太难了！"></a>Q: 这对我来说太难了！</h3><blockquote>
<p>你可以的，慢慢来，如果需要的话，你逐个字符的输入，然后弄明白它是做什么的。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise40" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise40/" class="article-date">
  	<time datetime="2014-11-29T07:41:45.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise40/">笨办法学Python--exercise40.模块, 类和对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Python 是一门“面向对象编程语言”。这意味着在Python中有一个叫做类的概念，你能通过类用一种特殊的方式构建你的软件。使用类的概念，能给你的程序增添一致性，这样你可以用一种很轻松方便的方式调用他们。至少，这是面向对象的理论。</p>
<p>我现在要通过使用你已经知道的字典和模块等来教你开始学习面向对象编程、类和对象。我的问题是面向对象编程（OOP）只是普通的怪异。你要为之而奋斗，努力尝试理解我讲的内容，编写代码，在下一个练习中，我会更深入的讲解。</p>
<p>我们要开始了。</p>
<h2 id="模块就像字典"><a href="#模块就像字典" class="headerlink" title="模块就像字典"></a>模块就像字典</h2><p>你知道字典是如何被创建以及使用的，它用来将一个事物对应到另一个事物。意思就是说如果你有一个字典，字典中包括一个key “apple”，那么你就可以实现：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mystuff = &#123;<span class="string">'apple'</span>: <span class="string">"I AM APPLES!"</span>&#125;</span><br><span class="line"><span class="keyword">print</span> mystuff[<span class="string">'apple'</span>]</span><br></pre></td></tr></table></figure></p>
<p>记住“从X获取Y”的说法，然后想一想模块（module）。你之前已经写过一些模块，你应该知道它们：</p>
<blockquote>
<ol>
<li>包含一些函数和变量的python文件</li>
<li>你可以导入这个文件</li>
<li>你可以用<code>.</code>操作符访问这个模块的函数和变量</li>
</ol>
</blockquote>
<p>想象一下我有一个叫做<code>mystuff.py</code>的模块，在这个模块中有一个叫做<code>apple</code>的函数，下面是 <code>mystuff.py</code> 模块的代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># this goes in mystuff.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apple</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"I AM APPLES!"</span></span><br></pre></td></tr></table></figure></p>
<p>当我写完以上代码，我就可以通过import来调用<code>mystuff</code>模块，并访问<code>apple</code>函数：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mystuff</span><br><span class="line">mystuff.apple()</span><br></pre></td></tr></table></figure></p>
<p>我还可以增加一个叫做<code>tangerine</code>的变量:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apple</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"I AM APPLES!"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># this is just a variable</span></span><br><span class="line">tangerine = <span class="string">"Living reflection of a dream"</span></span><br></pre></td></tr></table></figure></p>
<p>可以用相同的方法来访问：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mystuff</span><br><span class="line"></span><br><span class="line">mystuff.apple()</span><br><span class="line"><span class="keyword">print</span> mystuff.tangerine</span><br></pre></td></tr></table></figure></p>
<p>返回再看字典，你应该发现模块的使用跟字典是相似的，只不过语法不同，我们比较一下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mystuff[<span class="string">'apple'</span>] <span class="comment"># get apple from dict</span></span><br><span class="line">mystuff.apple() <span class="comment"># get apple from the module</span></span><br><span class="line">mystuff.tangerine <span class="comment"># same thing, it's just a variable</span></span><br></pre></td></tr></table></figure></p>
<p>也就是说我们在Python中有一套通用的模式：</p>
<blockquote>
<ol>
<li>有一个key=value模式的容器</li>
<li>通过key从容器中获取数据</li>
</ol>
</blockquote>
<p>在字典中，key是一个字符串，写法为<code>[key]</code>,在模块中，key是一个标识符，写法为<code>.key</code>，在其余的地方，他们几乎是一样的。</p>
<h2 id="类就像模块"><a href="#类就像模块" class="headerlink" title="类就像模块"></a>类就像模块</h2><p>你可以认为一个模块就是一个可以存放Python代码的特殊字典，这样你就可以通过<code>.</code>操作符访问它。Python还有一个另外的结构提供相似的功能，就是类（class）。类的作用是组织一系列的函数和数据并将它们放在一个容器里，这样你可以通过<code>.</code>操作符访问到它们。</p>
<p>如果我想创建一个类似<code>mystuff</code>的类，我需要这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStuff</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.tangerine = <span class="string">"And now a thousand years between"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apple</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"I AM CLASSY APPLES!"</span></span><br></pre></td></tr></table></figure>
<p>这相比于模块复杂一些，对比之下肯定会有不同，但是你应该能返现这个类就像写一个包含<code>apple()</code>方法的“迷你”<code>mystuff</code>模块一样.让你困惑的地方可能是<code>__init__()</code>这个方法以及使用<code>self.tangerine</code>给<code>tangerine</code>赋值。</p>
<p>这正是为什么要使用类而不是仅有模块的原因：你可以使用<code>Mystuff</code>这个类，还可以用它来创建更多个<code>Mystuff</code>，而他们之间也不会互相冲突。当你导入一个模块时，你的整个项目也就只有一个这个模块。</p>
<p>在你理解这些之前，你需要明白什么是“对象”，以及如何像使用<code>Mystuff.py</code>模块一样使用<code>Mystuff</code>这个类。</p>
<h2 id="对象就像导入"><a href="#对象就像导入" class="headerlink" title="对象就像导入"></a>对象就像导入</h2><p>如果一个类就像一个迷你模块，那么类也会有一个类似<code>import</code>的概念，这个概念被称为实例化，这只是对创建一种更虚幻更聪明的叫法。当一个类被实例化，你就得到一个类的对象。</p>
<p>实例化类的方法就是像调用函数一样调用这个类：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thing = MyStuff()</span><br><span class="line">thing.apple()</span><br><span class="line"><span class="keyword">print</span> thing.tangerine</span><br></pre></td></tr></table></figure></p>
<p>第一行就是实例化的操作，这个操作多像是在调用一个函数啊。当然了，python在幕后帮你做了一系列的事情，我带你来看看具体的调用步骤：</p>
<blockquote>
<ol>
<li>python 查找 <code>MyStuff()</code> 并确认它是你已经定义过的类</li>
<li>python创建一个空的对象，该对象拥有你在类中用<code>def</code>创建的所有函数</li>
<li>python看你是否创建了<code>__init__</code>函数，如果有，调用该方法初始化你新创建的空对象</li>
<li>在<code>MyStuff</code>中，<code>__init__</code>方法有一个额外的变量<code>self</code>，这是python为我创建的一个空的对象，我可以在其上设置变量。</li>
<li>然后，我给<code>self.tangerine</code>设置一首歌词，然后初始化这个对象</li>
<li>python可以使用这个新创建好的对象，并将其分配给我可以使用的变量<code>thing</code>。</li>
</ol>
</blockquote>
<p>这就是当你调用一个类的时候，python做的事情。记住，这并不是把类给你，而是把类作为蓝本来创建这种类型东西的副本。</p>
<p>我给了你一个类的简单工作原理，这样你就可以基于你所了解的模块，建立你对类的理解。事实上，在这一点上，类和对象与模块是有区别的：</p>
<blockquote>
<ul>
<li>类是用来创建迷你模块的蓝本或定义 </li>
<li>实例化是如何创建这些小模块，并在同一时间将其导入。实例化仅仅是指通过类创建一个对象。</li>
<li>由此产生的迷你模块被称为对象，你可以将其分配给一个变量，让它开始运行</li>
</ul>
</blockquote>
<p>在这一点上，对象和模块的表现不同，这只是提供一种让你理解类和对象的方法。</p>
<h2 id="从一个事物中获取事物"><a href="#从一个事物中获取事物" class="headerlink" title="从一个事物中获取事物"></a>从一个事物中获取事物</h2><p>现在我提供给你3中方法从一个事物中获取另一个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dict style</span></span><br><span class="line">mystuff[<span class="string">'apples'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># module style</span></span><br><span class="line">mystuff.apples()</span><br><span class="line"><span class="keyword">print</span> mystuff.tangerine</span><br><span class="line"></span><br><span class="line"><span class="comment"># class style</span></span><br><span class="line">thing = MyStuff()</span><br><span class="line">thing.apples()</span><br><span class="line"><span class="keyword">print</span> thing.tangerine</span><br></pre></td></tr></table></figure>
<h2 id="类的举例"><a href="#类的举例" class="headerlink" title="类的举例"></a>类的举例</h2><p>你应该可以看到在这三个key=value的容器类型有一定的相似性，你也可能有一堆问题.记住这些问题，下一节练习会训练你关于“面向对象的词汇”。这节练习中，我只想让你输入这些代码并保证它能正常运行，这样能让你再继续下一节练习之前获得一些经验。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Song</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lyrics)</span>:</span></span><br><span class="line">        self.lyrics = lyrics</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sing_me_a_song</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> self.lyrics:</span><br><span class="line">            <span class="keyword">print</span> line</span><br><span class="line"></span><br><span class="line">happy_bday = Song([<span class="string">"Happy birthday to you"</span>,</span><br><span class="line">                   <span class="string">"I don't want to get sued"</span>,</span><br><span class="line">                   <span class="string">"So I'll stop right there"</span>])</span><br><span class="line"></span><br><span class="line">bulls_on_parade = Song([<span class="string">"They rally around tha family"</span>,</span><br><span class="line">                        <span class="string">"With pockets full of shells"</span>])</span><br><span class="line"></span><br><span class="line">happy_bday.sing_me_a_song()</span><br><span class="line"></span><br><span class="line">bulls_on_parade.sing_me_a_song()</span><br></pre></td></tr></table></figure>
<h2 id="你应该看到的内容"><a href="#你应该看到的内容" class="headerlink" title="你应该看到的内容"></a>你应该看到的内容</h2><pre><code>$ python ex40.py
Happy birthday to you
I don&apos;t want to get sued
So I&apos;ll stop right there
They rally around tha family
With pockets full of shells
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>用本节学到的内容多写几首歌，确定你明白你把一个字符串的列表作为歌词传递进去。 </li>
<li>把歌词放进一个单独的变量，再把这个变量传递给类</li>
<li>看看你能不能让这个类做更多的事情，如果没什么想法也没关系，试试看，会有什么</li>
<li>在网上搜索一些“面向对象编程”的资料，尝试让你的大脑填满这些资料。如果这些资料对你没有用，也没关系，这些东西有一半对我来说也是没有意义的。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q：为什么我在类里创建-init-或其他函数的时候需要使用self"><a href="#Q：为什么我在类里创建-init-或其他函数的时候需要使用self" class="headerlink" title="Q：为什么我在类里创建__init__或其他函数的时候需要使用self?"></a>Q：为什么我在类里创建<code>__init__</code>或其他函数的时候需要使用<code>self</code>?</h3><blockquote>
<p>如果你不实用<code>self</code>，像这种代码<code>cheese = &#39;Frank&#39;</code>就是不明确的. 代码并不清楚你指的是实例的<code>cheese</code>属性，还是一个叫做<code>cheese</code>d的全局变量。如果你使用<code>self.cheese=&#39;Frank&#39;</code>代码就会十分清楚你指的就是实例中的属性<code>self.cheese</code>.</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise39" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise39/" class="article-date">
  	<time datetime="2014-11-29T05:42:31.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise39/">笨办法学Python--exercise39.字典,可爱的字典</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>接下来我要教你另外一种让你伤脑筋的容器型数据结构，因为一旦你学会这种容器，你将拥有超酷的能力。这是最有用的容器：字典(dictionary)。</p>
<p>Python 将这种数据类型叫做 “dict”，有的语言里它的名称是 “hash”。这两种名字我都会用到，不过这并不重要，重要的是它们和列表的区别。你看，针对列表你可以做这样的事情：</p>
<pre><code>&gt;&gt;&gt; things = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]
&gt;&gt;&gt; print things[1]
b
&gt;&gt;&gt; things[1] = &apos;z&apos;
&gt;&gt;&gt; print things[1]
z
&gt;&gt;&gt; things
[&apos;a&apos;, &apos;z&apos;, &apos;c&apos;, &apos;d&apos;]
</code></pre><p>你可以使用数字作为列表的索引，也就是你可以通过数字找到列表中的元素。你现在应该了解列表的这些特性，而你也应了解，你也只能通过数字来获取列表中的元素。</p>
<p>而 dict 所作的，是让你可以通过任何东西找到元素，不只是数字。是的，字典可以将一个物件和另外一个东西关联，不管它们的类型是什么，我们来看看：</p>
<pre><code>&gt;&gt;&gt; stuff = {&apos;name&apos;: &apos;Zed&apos;, &apos;age&apos;: 39, &apos;height&apos;: 6 * 12 + 2}
&gt;&gt;&gt; print stuff[&apos;name&apos;]
Zed
&gt;&gt;&gt; print stuff[&apos;age&apos;]
39
&gt;&gt;&gt; print stuff[&apos;height&apos;]
74
&gt;&gt;&gt; stuff[&apos;city&apos;] = &quot;San Francisco&quot;
&gt;&gt;&gt; print stuff[&apos;city&apos;]
San Francisco
</code></pre><p>你将看到除了通过数字以外，我们还可以用字符串来从字典中获取 stuff ，我们还可以用字符串来往字典中添加元素。当然它支持的不只有字符串，我们还可以做这样的事情：</p>
<pre><code>&gt;&gt;&gt; stuff[1] = &quot;Wow&quot;
&gt;&gt;&gt; stuff[2] = &quot;Neato&quot;
&gt;&gt;&gt; print stuff[1]
Wow
&gt;&gt;&gt; print stuff[2]
Neato
&gt;&gt;&gt; stuff
{&apos;city&apos;: &apos;San Francisco&apos;, 2: &apos;Neato&apos;, &apos;name&apos;: &apos;Zed&apos;, 1: &apos;Wow&apos;, &apos;age&apos;: 39, &apos;height&apos;: 74}
</code></pre><p>在这段代码中，我使用了数字，当我打印stuff的时候，你可以看到，不止有数字还有字符串作为字典的key。事实上，我可以使用任何东西，这么说并不准确，不过你先这么理解就行了。</p>
<p>当然了，一个只能放东西进去的字典是没啥意思的，所以我们还要有删除的方法，也就是使用<code>del</code> 这个关键字：</p>
<pre><code>&gt;&gt;&gt; del stuff[&apos;city&apos;]
&gt;&gt;&gt; del stuff[1]
&gt;&gt;&gt; del stuff[2]
&gt;&gt;&gt; stuff
{&apos;name&apos;: &apos;Zed&apos;, &apos;age&apos;: 36, &apos;height&apos;: 74}
</code></pre><h2 id="一个字典实例"><a href="#一个字典实例" class="headerlink" title="一个字典实例"></a>一个字典实例</h2><p>接下来我们要做一个练习，你必须非常仔细，我要求你将这个练习写下来，然后试着弄懂它做了些什么。注意一下这个例子中是如何对应这些州和它们的缩写，以及这些缩写对应的州里的城市。 记住, “映射” 是字典中的关键概念.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a mapping of state to abbreviation</span></span><br><span class="line">states = &#123;</span><br><span class="line">    <span class="string">'Oregon'</span>: <span class="string">'OR'</span>,</span><br><span class="line">    <span class="string">'Florida'</span>: <span class="string">'FL'</span>,</span><br><span class="line">    <span class="string">'California'</span>: <span class="string">'CA'</span>,</span><br><span class="line">    <span class="string">'New York'</span>: <span class="string">'NY'</span>,</span><br><span class="line">    <span class="string">'Michigan'</span>: <span class="string">'MI'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a basic set of states and some cities in them</span></span><br><span class="line">cities = &#123;</span><br><span class="line">    <span class="string">'CA'</span>: <span class="string">'San Francisco'</span>,</span><br><span class="line">    <span class="string">'MI'</span>: <span class="string">'Detroit'</span>,</span><br><span class="line">    <span class="string">'FL'</span>: <span class="string">'Jacksonville'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># add some more cities</span></span><br><span class="line">cities[<span class="string">'NY'</span>] = <span class="string">'New York'</span></span><br><span class="line">cities[<span class="string">'OR'</span>] = <span class="string">'Portland'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print out some cities</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"NY State has: "</span>, cities[<span class="string">'NY'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"OR State has: "</span>, cities[<span class="string">'OR'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># print some states</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Michigan's abbreviation is: "</span>, states[<span class="string">'Michigan'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Florida's abbreviation is: "</span>, states[<span class="string">'Florida'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># do it by using the state then cities dict</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Michigan has: "</span>, cities[states[<span class="string">'Michigan'</span>]]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Florida has: "</span>, cities[states[<span class="string">'Florida'</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># print every state abbreviation</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> state, abbrev <span class="keyword">in</span> states.items():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s is abbreviated %s"</span> % (state, abbrev)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print every city in state</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> abbrev, city <span class="keyword">in</span> cities.items():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s has the city %s"</span> % (abbrev, city)</span><br><span class="line"></span><br><span class="line"><span class="comment"># now do both at the same time</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> state, abbrev <span class="keyword">in</span> states.items():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s state is abbreviated %s and has city %s"</span> % (</span><br><span class="line">        state, abbrev, cities[abbrev])</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="comment"># safely get a abbreviation by state that might not be there</span></span><br><span class="line">state = states.get(<span class="string">'Texas'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> state:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Sorry, no Texas."</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># get a city with a default value</span></span><br><span class="line">city = cities.get(<span class="string">'TX'</span>, <span class="string">'Does Not Exist'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"The city for the state 'TX' is: %s"</span> % city</span><br></pre></td></tr></table></figure>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><pre><code>$ python ex39.py
----------
NY State has:  New York
OR State has:  Portland
----------
Michigan&apos;s abbreviation is:  MI
Florida&apos;s abbreviation is:  FL
----------
Michigan has:  Detroit
Florida has:  Jacksonville
----------
California is abbreviated CA
Michigan is abbreviated MI
New York is abbreviated NY
Florida is abbreviated FL
Oregon is abbreviated OR
----------
FL has the city Jacksonville
CA has the city San Francisco
MI has the city Detroit
OR has the city Portland
NY has the city New York
----------
California state is abbreviated CA and has city San Francisco
Michigan state is abbreviated MI and has city Detroit
New York state is abbreviated NY and has city New York
Florida state is abbreviated FL and has city Jacksonville
Oregon state is abbreviated OR and has city Portland
----------
Sorry, no Texas.
The city for the state &apos;TX&apos; is: Does Not Exist
</code></pre><h2 id="字典能做什么"><a href="#字典能做什么" class="headerlink" title="字典能做什么"></a>字典能做什么</h2><p>字典是另一个数据结构的例子，和列表一样，是编程中最常用的数据结构之一。 字典是用来做映射或者存储你需要的键值对，这样当你需要的时候，你可以通过key来获取它的值。同样，程序员不会使用一个像“字典”这样的术语，来称呼那些不能像一个写满词汇的真实字典正常使用的事物，所以我们只要把它当做真实世界中的字典来用就好。</p>
<p>假如你想知道这个单词”Honorificabilitudinitatibus”的意思。你可以很简单的把它复制粘贴放进任何一个搜索引擎中找到答案。我们真的可以说一个搜索引擎就像一个巨大的超级复杂版本的《牛津英语词典》(OED).在搜索引擎出现之前，你可能会这样做：</p>
<blockquote>
<ol>
<li>走进图书馆，找到一本字典，我们称这本字典为OED</li>
<li>你知道单词”honorificabilitudinitatibus” 以字母 ‘H’开头，所以你查看字典的小标签，找到以 ‘H’ 开头的部分.</li>
<li>然后你会浏览书页，直到找到”hon”开头的地方。</li>
<li>然后你再翻过一些书页，直到找到 “honorificabilitudinitatibus” 或者找到以 “hp” 开头的单词，发现这个词不在我们的字典中。</li>
<li>当你找到这个条目，你就可以仔细阅读并弄明白它的意思。</li>
</ol>
</blockquote>
<p>这个过程跟我们在程序中使用字典的是相似的，你会映射（”mapping”）找到这个单词”honorificabilitudinitatibus”的定义。Python中的字典就跟真实世界中的这本牛津词典（OED）差不多。</p>
<h2 id="定义自己的字典类"><a href="#定义自己的字典类" class="headerlink" title="定义自己的字典类"></a>定义自己的字典类</h2><p>这节练习的最后一段代码给你演示了如何使用你刚学会的list来创建一个字典数据结构。这段代码可能有些难以理解，所以如果你要花费你很长的时间去弄明白代码额含义也不要担心。代码中会有一些新的知识点，它确实有些复杂，还有一些事情需要你上网查找</p>
<p>为了使用Python中的<code>dict</code>保存数据，我打算把我的数据结构叫做<code>hashmap</code>,这是字典数据结构的另一个名字。你要把下面的代码输入一个叫做<code>hashmap.py</code>的文件，这样我们就可以在另一个文件 <code>ex39_test.py</code>中执行它。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new</span><span class="params">(num_buckets=<span class="number">256</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Initializes a Map with the given number of buckets."""</span></span><br><span class="line">    aMap = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, num_buckets):</span><br><span class="line">        aMap.append([])</span><br><span class="line">    <span class="keyword">return</span> aMap</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hash_key</span><span class="params">(aMap, key)</span>:</span></span><br><span class="line">    <span class="string">"""Given a key this will create a number and then convert it to</span><br><span class="line">    an index for the aMap's buckets."""</span></span><br><span class="line">    <span class="keyword">return</span> hash(key) % len(aMap)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_bucket</span><span class="params">(aMap, key)</span>:</span></span><br><span class="line">    <span class="string">"""Given a key, find the bucket where it would go."""</span></span><br><span class="line">    bucket_id = hash_key(aMap, key)</span><br><span class="line">    <span class="keyword">return</span> aMap[bucket_id]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_slot</span><span class="params">(aMap, key, default=None)</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    Returns the index, key, and value of a slot found in a bucket.</span><br><span class="line">    Returns -1, key, and default (None if not set) when not found.</span><br><span class="line">    """</span></span><br><span class="line">    bucket = get_bucket(aMap, key)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, kv <span class="keyword">in</span> enumerate(bucket):</span><br><span class="line">        k, v = kv</span><br><span class="line">        <span class="keyword">if</span> key == k:</span><br><span class="line">            <span class="keyword">return</span> i, k, v</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>, key, default</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(aMap, key, default=None)</span>:</span></span><br><span class="line">    <span class="string">"""Gets the value in a bucket for the given key, or the default."""</span></span><br><span class="line">    i, k, v = get_slot(aMap, key, default=default)</span><br><span class="line">    <span class="keyword">return</span> v</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set</span><span class="params">(aMap, key, value)</span>:</span></span><br><span class="line">    <span class="string">"""Sets the key to the value, replacing any existing value."""</span></span><br><span class="line">    bucket = get_bucket(aMap, key)</span><br><span class="line">    i, k, v = get_slot(aMap, key)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># the key exists, replace it</span></span><br><span class="line">        bucket[i] = (key, value)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># the key does not, append to create it</span></span><br><span class="line">        bucket.append((key, value))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(aMap, key)</span>:</span></span><br><span class="line">    <span class="string">"""Deletes the given key from the Map."""</span></span><br><span class="line">    bucket = get_bucket(aMap, key)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(len(bucket)):</span><br><span class="line">        k, v = bucket[i]</span><br><span class="line">        <span class="keyword">if</span> key == k:</span><br><span class="line">            <span class="keyword">del</span> bucket[i]</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list</span><span class="params">(aMap)</span>:</span></span><br><span class="line">    <span class="string">"""Prints out what's in the Map."""</span></span><br><span class="line">    <span class="keyword">for</span> bucket <span class="keyword">in</span> aMap:</span><br><span class="line">        <span class="keyword">if</span> bucket:</span><br><span class="line">            <span class="keyword">for</span> k, v <span class="keyword">in</span> bucket:</span><br><span class="line">                <span class="keyword">print</span> k, v</span><br></pre></td></tr></table></figure>
<p>上面的代码创建了一个叫做<code>hashmap</code>的模块，你需要把这个模块import到文件 <code>ex39_test.py</code> 中，并让这个文件运行起来：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashmap</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a mapping of state to abbreviation</span></span><br><span class="line">states = hashmap.new()</span><br><span class="line">hashmap.set(states, <span class="string">'Oregon'</span>, <span class="string">'OR'</span>)</span><br><span class="line">hashmap.set(states, <span class="string">'Florida'</span>, <span class="string">'FL'</span>)</span><br><span class="line">hashmap.set(states, <span class="string">'California'</span>, <span class="string">'CA'</span>)</span><br><span class="line">hashmap.set(states, <span class="string">'New York'</span>, <span class="string">'NY'</span>)</span><br><span class="line">hashmap.set(states, <span class="string">'Michigan'</span>, <span class="string">'MI'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a basic set of states and some cities in them</span></span><br><span class="line">cities = hashmap.new()</span><br><span class="line">hashmap.set(cities, <span class="string">'CA'</span>, <span class="string">'San Francisco'</span>)</span><br><span class="line">hashmap.set(cities, <span class="string">'MI'</span>, <span class="string">'Detroit'</span>)</span><br><span class="line">hashmap.set(cities, <span class="string">'FL'</span>, <span class="string">'Jacksonville'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add some more cities</span></span><br><span class="line">hashmap.set(cities, <span class="string">'NY'</span>, <span class="string">'New York'</span>)</span><br><span class="line">hashmap.set(cities, <span class="string">'OR'</span>, <span class="string">'Portland'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># print out some cities</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"NY State has: %s"</span> % hashmap.get(cities, <span class="string">'NY'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"OR State has: %s"</span> % hashmap.get(cities, <span class="string">'OR'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print some states</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Michigan's abbreviation is: %s"</span> % hashmap.get(states, <span class="string">'Michigan'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Florida's abbreviation is: %s"</span> % hashmap.get(states, <span class="string">'Florida'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># do it by using the state then cities dict</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Michigan has: %s"</span> % hashmap.get(cities, hashmap.get(states, <span class="string">'Michigan'</span>))</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Florida has: %s"</span> % hashmap.get(cities, hashmap.get(states, <span class="string">'Florida'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># print every state abbreviation</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line">hashmap.list(states)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print every city in state</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line">hashmap.list(cities)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'-'</span> * <span class="number">10</span></span><br><span class="line">state = hashmap.get(states, <span class="string">'Texas'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> state:</span><br><span class="line">  <span class="keyword">print</span> <span class="string">"Sorry, no Texas."</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># default values using ||= with the nil result</span></span><br><span class="line"><span class="comment"># can you do this on one line?</span></span><br><span class="line">city = hashmap.get(cities, <span class="string">'TX'</span>, <span class="string">'Does Not Exist'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"The city for the state 'TX' is: %s"</span> % city</span><br></pre></td></tr></table></figure>
<p>你应该发现这段代码跟我们在这节开始时写的代码几乎相同，除了它使用了你新实现的HashMap。通读代码并且确信你明白这段代码中的每一行是如何与<code>ex39.py</code>中的代码实现相同的功能。</p>
<h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><p>这个 <code>hashmap</code> 只不过是”拥有键值对的有插槽的列表”，用几分钟时间分析一下我说的意思：</p>
<p>“一个列表”<br>在 <code>hashmap</code> 函数中，我创建了一个列表变量<code>aMap</code>，并且用其他的列表填充了这个变量。<br>“有插槽的列表”<br>最开始这个列表是空的,当我给这个数据结构添加键值对之后，它就会填充一些插槽或者其他的东西<br>“拥有键值对”<br>表示这个列表中的每个插槽都包含一个<code>(key, value)</code>这样的元素或者数据对。</p>
<p>如果我的这个描述仍旧没让你弄明白是什么意思，花点时间在纸上画一画它们，直到你搞明白为止。实际上，手动在纸上运算是让你弄明白它们的好办法。</p>
<p>你现在知道数据是如何被组织起来的，你还需要知道它每个操作的算法。算法指的是你做什么事情的步骤。它是是数据结构运行起来的代码。我们接下来要逐个分析下代码中用到的操作， 下面是在 <code>hashmap</code>算法中一个通用的模式：</p>
<blockquote>
<ol>
<li>把一个关键字转换成整数使用哈希函数: <code>hash_key</code>.</li>
<li>Convert this hash to a bucket number using a <code>%</code>(模除) 操作.</li>
<li>Get this bucket from the <code>aMap</code> list of buckets, and then traverse it to find the slot that contains the key we want.</li>
</ol>
</blockquote>
<p>操作<code>set</code> 实现以下功能,如果key值存在，则替换原有的值，不存在则创建一个新值。</p>
<p>下面我们逐个函数分析一下hashmap的代码，让你明白它是如何工作的。 跟我一起分析并确保你明白每一行代码的意思。给每一行加上注释，确保你明白他们是做什么的。就是如此简单，我建议你对下面提到的每一行代码都花点时间在Python shell或者纸上多练习练习:</p>
<p>new<br>首先，我以创建一个函数来生成一个hashmap开始，也被称为初始化。 我先创建一个包含列表的变量，叫做<code>aMap</code>,然后把列表<code>num_buckets</code>放进去， <code>num_buckets</code>用来存放我给hashmap设置的内容。 后面我会在另一个函数中使用<code>len(aMap)</code> 来查找一共有多少个 buckets。确信你明白我说的。</p>
<p>hash_key<br>这个看似简单的函数是一个dict如何工作的核心。它是用Python内建的哈希函数将字符串转换为数字。Python为自己的字典数据结构使用此功能，而我只是复用它. 你应该启动一个Python控制台，看看它是如何工作的. 当我拿到key对应的数字的时候, 我使用 <code>%</code> (模除) 操作和 <code>len(aMap)</code> 来获得一个放置这个key的位置。你应该知道，<code>%</code> (模除) 操作将会返回除法操作的余数。我也可以使用这个方法来限制大数，将其固为较小的一组数字。如果你不知道我在说什么，使用Python解析器研究一下。</p>
<p>get_bucket<br>这个函数使用<code>hash_key</code>来找到一个key所在的“bucket”。当我在<code>hash_key</code>函数中进行<code>%len(aMap)</code>操作的时候，我知道无论我获得哪一个 <code>bucket_id</code>都会填充进  <code>aMap</code> 列表中. 使用 <code>bucket_id</code> 可以找到一个key所在的“bucket” 。</p>
<p>get_slot<br>这个函数使用<code>get_bucket</code>来获得一个key所在的“bucket”， 它通过查找bucket中的每一个元素来找到对应的key。找到对应的key之后，它会返回这样一个元组<code>(i, k, v)</code>，i表示的是key的索引值，k就是key本身，v是key对应的值。你现在已经了解了足够字典数据结构运行的原理。它通过keys、哈希值和模量找到一个bucket，然后搜索这个bucket，找到对应的条目。它有效的减少了搜索次数。</p>
<p>get<br>这是一个人们需要<code>hashmap</code>的最方便的函数。它使用<code>get_slot</code>来获得 元组<code>(i, k, v)</code> 但是只返回<code>v</code>. 确定你明白这些默认变量是如何运行的，以及<code>get_slot</code>中<code>(i, k, v)</code> 分派给<code>i</code>, <code>k</code>, <code>v</code>的变量是如何获得的。</p>
<p>set<br>设置一个<code>key/value</code>键值对，并将其追加到字典中，保证以后再用到的时候可以获取的到。但是，我希望我的<code>hashmap</code>每个key值存储一次。为了做到这点， 首先，我要找到这个key是不是已经存在，如果存在，我会替换它原来的值，如果不存在，则会追加进来。这样做会比简单的追加慢一些，但是更满足<code>hashmap</code>使用者的期望。如果你允许一个key有多个value，你需要使用 <code>get</code>方法查阅所有的“bucket”并返回一个所有value的列表。这是平衡设计的一个很好的例子。现在的版本是你可以更快速的 <code>get</code>, 但是会慢一些 <code>set</code>.</p>
<p>delete<br>删除一个key, 找到key对应的 bucket，并将其从列表中删除。因为我选择一个key只能对应一个value，当我找到一个相应的key的时候，我就可以停止继续查找和删除。如果我选择允许一个key可以对应多个value的话，我的删除操作也会慢一些，因为我要找到所有key对应的value，并将其删除。</p>
<p>list<br>最后的功能仅仅是一个小小的调试功能，它能打印出<code>hashmap</code> 中的所有东西，并且能帮助你理解字典的细微之处。</p>
<p>在所有的函数之后，我有一点点的测试代码，可以确保他们正常工作。</p>
<h2 id="三级列表"><a href="#三级列表" class="headerlink" title="三级列表"></a>三级列表</h2><p>正如我在讨论中提到的， 由于我选择 <code>set</code> 来重写 (替换) 原有的keys，这会让<code>set</code>执行的慢一些，但是这决定能让其他的一些函数快一些。如果我想要一个<code>hashmap</code>允许一个key对应多个value，但又要求所有函数仍然执行的很快，怎么办</p>
<p>我要做的就是让每个“bucket”中的插槽的值都是一个列表。这意味着我要给字典再增加第三级列表。这种<code>hashmap</code>仍然满足字典的定义。我说过， “每一个key可以有对个value”的另一种说法就是”每一个key有一个value的列表”。 </p>
<h2 id="你应该看到的结果（again）"><a href="#你应该看到的结果（again）" class="headerlink" title="你应该看到的结果（again）"></a>你应该看到的结果（again）</h2><pre><code>$ python ex39_test.py
Traceback (most recent call last):
  File &quot;ex39_test.py&quot;, line 1, in &lt;module&gt;
    import hashmap
ImportError: No module named hashmap
</code></pre><h2 id="什么时候选择字典，什么时候选择列表"><a href="#什么时候选择字典，什么时候选择列表" class="headerlink" title="什么时候选择字典，什么时候选择列表"></a>什么时候选择字典，什么时候选择列表</h2><p>如同我在练习38中提到的，列出有特定的特性，帮助你控制和组织需要放在表结构的东西。 字典也一样，但是<code>dict</code>的特性是与列表不同的，因为他们是用键值对映射来工作的。当遇到下面情况的时候，可以使用字典： </p>
<blockquote>
<ol>
<li>你要检索的东西是以一些标识为基础的，比如名字、地址或其他一切可以作为key的东西。</li>
<li>你不需要这些东西是有序的。词典通常不会有序的概念，所以你必须使用一个列表。</li>
<li>你想要通过key增删一个元素。</li>
</ol>
</blockquote>
<p>也就是说，如果你要用一个非数字的key，使用<code>dict</code>，如果你需要有序的东西，使用<code>list</code>.</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>用自己国家的州和城市做一些类似的映射关系</li>
<li>在 Python 文档中找到 dictionary 的相关的内容，学着对 dict 做更多的操作。</li>
<li>找出一些 dict 无法做到的事情。例如比较重要的一个就是 dict 的内容是无序的，你可以检查一下看看是否真是这样。</li>
<li>阅读python的关于断言的功能，然后修改hashmap的代码，给每一个测试增加一些断言相关的代码，替换原来的打印代码。比如，你可以断言第一个操作返回”Flamenco Sketches” 而不是直接打印出”Flamenco Sketches” 。</li>
<li>有没有注意到<code>list</code>方法没有按照你增加元素的顺序把它们列出来？这是字典不维持秩序的一个例子，如果你将代码进行分析，你就会明白为什么。</li>
<li>像写<code>list</code>方法一样写一个<code>dump</code>方法，实现备份字典内所有内容的功能</li>
<li>确定你知道<code>hash</code>在代码中实现了什么功能，它是一个特殊的函数，能将字符串转化为整数。在网上找到相关文档，了解在程序设计中，什么是哈希函数。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q：字典和列表的区别？"><a href="#Q：字典和列表的区别？" class="headerlink" title="Q：字典和列表的区别？"></a>Q：字典和列表的区别？</h3><blockquote>
<p>list是一个有序的项目列表，dict是匹配一些项目（称为“键”）和其他项目（称为“值”）。</p>
</blockquote>
<h3 id="Q-我怎样使用字典？"><a href="#Q-我怎样使用字典？" class="headerlink" title="Q: 我怎样使用字典？"></a>Q: 我怎样使用字典？</h3><blockquote>
<p>当你需要通过一个值来访问另一个值的时候，使用字典。实际上，你可以把字典称作“对照表”</p>
</blockquote>
<h3 id="Q-我怎样使用列表？"><a href="#Q-我怎样使用列表？" class="headerlink" title="Q: 我怎样使用列表？"></a>Q: 我怎样使用列表？</h3><blockquote>
<p>对任何需要有序的事情集合使用列表，你只需要通过他们的数值索引来访问它们。</p>
</blockquote>
<h3 id="Q-加入我需要一个字典，但是又需要是有序的，怎么办？"><a href="#Q-加入我需要一个字典，但是又需要是有序的，怎么办？" class="headerlink" title="Q:加入我需要一个字典，但是又需要是有序的，怎么办？"></a>Q:加入我需要一个字典，但是又需要是有序的，怎么办？</h3><blockquote>
<p>看看python中<code>collections.OrderedDict</code>这个数据结构。网上搜索相关的文档。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise38" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/29/learn-python-the-hard-way-exercise38/" class="article-date">
  	<time datetime="2014-11-29T04:18:13.000Z" itemprop="datePublished">2014-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/learn-python-the-hard-way-exercise38/">笨办法学Python--exercise38.列表操作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你已经学过了列表。在你学习“while循环”的时候，你对列表进行过“追加(append)”操作，而且将列表的内容打印了出来。另外你应该还在附加题里研究过 Python 文档，看了列表支持的其他操作。这已经是一段时间以前了，所以如果你不记得了的话，就回到本书的前面再复习一遍把。</p>
<p>找到了吗？还记得吗？很好。那时候你对一个列表执行了<code>append</code>函数。不过，你也许还没有真正明白发生的事情，所以我们再来看看我们可以对列表进行什么样的操作。</p>
<p>当你看到像 mystuff.append(‘hello’) 这样的代码时，你事实上已经在 Python 内部激发了一个连锁反应。以下是它的工作原理：</p>
<blockquote>
<ol>
<li>1.Python 看到你用到了<code>mystuff</code>，于是就去找到这个变量。也许它需要倒着检查看你有没有在哪里用<code>=</code>创建过这个变量，或者检查它是不是一个函数参数，或者看它是不是一个全局变量。不管哪种方式，它得先找到 mystuff 这个变量才行。</li>
<li>一旦它找到了<code>mystuff</code>，就轮到处理句点<code>.</code>(period)这个操作符，而且开始查看<code>mystuff</code>内部的一些变量了。由于<code>mystuff</code>是一个列表，Python 知道它支持一些函数。</li>
<li>接下来轮到了处理<code>append</code>。Python会将“append”和<code>mystuff</code>支持的所有函数的名称一一对比，如果确实其中有一个叫<code>append</code>的函数，那么 Python 就会去使用这个函数。</li>
<li>接下来 Python 看到了括号<code>(</code> (parenthesis) 并且意识到, “噢，原来这应该是一个函数”，到了这里，它就正常会调用这个函数了，不过这里的函数还要多一个参数才行。</li>
<li>这个额外的参数其实是……<code>mystuff</code>!我知道，很奇怪是不是？不过这就是 Python 的工作原理，所以还是记住这一点，就当它是正常的好了。真正发生的事情其实是 <code>append(mystuff, &#39;hello&#39;)</code> ，不过你看到的只是 <code>mystuff.append(&#39;hello&#39;)</code> 。</li>
</ol>
</blockquote>
<p>大部分时候你不需要知道这些细节，不过如果你看到一个像这样的 Python 错误信息的时候，上面的细节就对你有用了：</p>
<pre><code>$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41)
[GCC 4.4.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; class Thing(object):
...     def test(hi):
...             print &quot;hi&quot;
...
&gt;&gt;&gt; a = Thing()
&gt;&gt;&gt; a.test(&quot;hello&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: test() takes exactly 1 argument (2 given)
&gt;&gt;&gt;
</code></pre><p>就是这个吗？嗯，这个是我在Python命令行下展示给你的一点魔法。你还没有见过<code>class</code>不过后面很快就要碰到了。现在你看到 Python 说<code>test() takes exactly 1 argument (2 given)</code> (test() 只可以接受1个参数，实际上给了两个)。它意味着 python 把 <code>a.test(&quot;hello&quot;)</code> 改成了<code>test(a,&quot;hello&quot;)</code>，而有人弄错了，没有为它添加 <code>a</code>这个参数。</p>
<p>一下子要消化这么多可能有点难度，我们将做几个练习，让你头脑中有一个深刻的印象。下面的练习将字符串和列表混在一起，看看你能不能在里边找出点乐子来：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ten_things = <span class="string">"Apples Oranges Crows Telephone Light Sugar"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Wait there are not 10 things in that list. Let's fix that."</span></span><br><span class="line"></span><br><span class="line">stuff = ten_things.split(<span class="string">' '</span>)</span><br><span class="line">more_stuff = [<span class="string">"Day"</span>, <span class="string">"Night"</span>, <span class="string">"Song"</span>, <span class="string">"Frisbee"</span>, <span class="string">"Corn"</span>, <span class="string">"Banana"</span>, <span class="string">"Girl"</span>, <span class="string">"Boy"</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> len(stuff) != <span class="number">10</span>:</span><br><span class="line">    next_one = more_stuff.pop()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Adding: "</span>, next_one</span><br><span class="line">    stuff.append(next_one)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"There are %d items now."</span> % len(stuff)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"There we go: "</span>, stuff</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Let's do some things with stuff."</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> stuff[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">print</span> stuff[<span class="number">-1</span>] <span class="comment"># whoa! fancy</span></span><br><span class="line"><span class="keyword">print</span> stuff.pop()</span><br><span class="line"><span class="keyword">print</span> <span class="string">' '</span>.join(stuff) <span class="comment"># what? cool!</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'#'</span>.join(stuff[<span class="number">3</span>:<span class="number">5</span>]) <span class="comment"># super stellar!</span></span><br></pre></td></tr></table></figure></p>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><pre><code>$ python ex38.py
Wait there are not 10 things in that list. Let&apos;s fix that.
Adding:  Boy
There are 7 items now.
Adding:  Girl
There are 8 items now.
Adding:  Banana
There are 9 items now.
Adding:  Corn
There are 10 items now.
There we go:  [&apos;Apples&apos;, &apos;Oranges&apos;, &apos;Crows&apos;, &apos;Telephone&apos;, &apos;Light&apos;, &apos;Sugar&apos;, &apos;Boy&apos;, &apos;Girl&apos;, &apos;Banana&apos;, &apos;Corn&apos;]
Let&apos;s do some things with stuff.
Oranges
Corn
Corn
Apples Oranges Crows Telephone Light Sugar Boy Girl Banana
Telephone#Light
</code></pre><h2 id="列表能实现什么"><a href="#列表能实现什么" class="headerlink" title="列表能实现什么"></a>列表能实现什么</h2><p>假设你打算创建一个基于钓鱼的电脑游戏。如果你不知道什么是钓鱼，花点时间在网上找到相关资料看一看。要做到这些，你需要里了解一些关于“扑克牌”的概念，并将它们变成你的Python程序。你必须用python写出知道如何玩一副虚拟扑克牌的代码，这样人们就能把你的游戏当成真实的游戏来玩，即使它不是真的。你需要的是一副“扑克牌”结构，而程序员就称之为“数据结构”。</p>
<p>什么是数据结构呢？如果你仔细想想，数据结构其实就是一种正式的构造（组织）一些数据（事实）的方法。真的就是这么简单，尽管一些数据结构十分错综复杂，它们也仅仅是在程序中存储数据的方式而已，这样你就能用不同的方式访问它们。</p>
<p>我将在下一节练习中更深入的讲解这些，但是列表是程序员常用的数据结构之一。它们只是数据的有序列表，你可以通过线性索引来存储或访问它们。什么？记住我说过的话，只是因为一个程序员说过“列表是一个列表”并不意味着它比真实世界中的列表复杂多少。 让我们以扑克牌为例：</p>
<blockquote>
<ol>
<li>你有一堆有值的卡片。</li>
<li>这些卡片式一堆，一列，或者可以从头到尾排列这些卡片。</li>
<li>你可以随机的从顶部、中部或者底部取出卡片。</li>
<li>如果你想找到某张特殊的卡片, 你必须一张一张的检索这些卡片。</li>
</ol>
</blockquote>
<p>让我们看看我说过什么：</p>
<p> “一个有序的列表”<br>是的，扑克牌有第一张和最后一张<br>“有一些你要存储的事物”<br>是的，卡片就是我要存储的东西<br>“可以随机访问”<br>是的，在这副牌中我可以任意取出一张.<br>“是线性的”<br>是的，如果我想找到特定的一张牌，我必须从头开始按顺序查找。<br>“有索引的”<br>差不多, 如果我让你找到一副扑克牌的第19张，你就必须按照顺序去数，直到你找到这一张。在python的列表中，计算机可以直接跳到你给出的索引处。这就是一个列表做的所有的事情，这么解释应该给了你一个在编程中找到列表概念的方法吧。编程中的每一个概念通常都有与真实世界相关联，至少在真实世界是有用的。如果你能找出虚拟的概念在真实世界中对应的概念，那你也可以通过这些找到数据结构到底是做什么的。</p>
<h2 id="什么情况可以使用列表"><a href="#什么情况可以使用列表" class="headerlink" title="什么情况可以使用列表"></a>什么情况可以使用列表</h2><p>当你有一些有东西能匹配列表数据结构的有用特性时，使用列表: </p>
<blockquote>
<ol>
<li>如果你需要维护一组次序，记住，这是把次序编成列表，而不是给次序排序，列表不会帮你排序。</li>
<li>如果你需要根据一个随机数访问列表内容，记住，这时候基数从0开始。</li>
<li>如果你需要从头到尾操作列表内容，记住，这就是for循环。</li>
</ol>
</blockquote>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>将每一个被调用的函数以上述的方式翻译成 Python 实际执行的动作。比如<code>more_stuff.pop()</code> 是 <code>pop(more_stuff)</code>.</li>
<li>将这两种方式翻译为自然语言。</li>
<li>上网阅读一些关于“面向对象编程(Object Oriented Programming)”的资料。晕了吧？嗯，我以前也是。别担心。你将从这本书学到足够用的关于面向对象编程的基础知识，而以后你还可以慢慢学到更多。</li>
<li>查一下 Python中的 “class” 是什么东西。不要阅读关于其他语言的 “class” 的用法，这会让你更糊涂。</li>
<li>如果你不知道我讲的是些什么东西，别担心。程序员为了显得自己聪明，于是就发明了 Opject Oriented Programming，简称为 OOP，然后他们就开始滥用这个东西了。如果你觉得这东西太难，你可以开始学一下 “函数编程(functional programming)”。</li>
<li>找出10种可以放在列表中的例子，并用它们写一些脚本。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q：你没有说说不要用while循环？"><a href="#Q：你没有说说不要用while循环？" class="headerlink" title="Q：你没有说说不要用while循环？"></a>Q：你没有说说不要用while循环？</h3><blockquote>
<p>是的，请记住，当需要的时候，你可以打破规则，只有蠢人才会一直一味的遵从规则。</p>
</blockquote>
<h3 id="Q-join-39-39-stuff-为什么没有生效？"><a href="#Q-join-39-39-stuff-为什么没有生效？" class="headerlink" title="Q:join(&#39; &#39;, stuff)为什么没有生效？"></a>Q:<code>join(&#39; &#39;, stuff)</code>为什么没有生效？</h3><blockquote>
<p>文档中关于join的内容，写的没有意义，<code>join</code>是使用一个字符串将列表内容链接起来的一个方法，你可以试试这么写<code>&#39; &#39;.join(stuff).</code>.</p>
</blockquote>
<h3 id="Q-为什么你用了一个while循环？"><a href="#Q-为什么你用了一个while循环？" class="headerlink" title="Q: 为什么你用了一个while循环？"></a>Q: 为什么你用了一个while循环？</h3><blockquote>
<p>试着用for循环改写一下，看看哪个更简单</p>
</blockquote>
<h3 id="Q-stuff-3-5-实现了什么功能？"><a href="#Q-stuff-3-5-实现了什么功能？" class="headerlink" title="Q: stuff[3:5]实现了什么功能？"></a>Q: <code>stuff[3:5]</code>实现了什么功能？</h3><blockquote>
<p>这句代码从<code>stuff</code>中获取了一个子集，包含stuff的第3和第4个元素，没有包含第5个元素。它和<code>range(3,5)</code>的工作原理相近。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise37" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/28/learn-python-the-hard-way-exercise37/" class="article-date">
  	<time datetime="2014-11-28T14:57:08.000Z" itemprop="datePublished">2014-11-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/28/learn-python-the-hard-way-exercise37/">笨办法学Python--exercise37.复习符号</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>现在该复习你学过的符号和python关键字了，而且你在本节还会学到一些新的东西。我在这里所作的是将所有的Python符号和关键字列出来，这些都是值得掌握的重点。</p>
<p>在这节课中，你需要复习每一个关键字，回想它的作用并且写下来，接着上网搜索它真正的功能。有些内容可能是难以搜索的，所以这对你可能有些难度，不过无论如何，你都要尝试一下。</p>
<p>如果你发现记忆中的内容有误，就在索引卡片上写下正确的定义，试着将自己的记忆纠正过来。</p>
<p>最后，将每一种符号和关键字用在程序里，你可以用一个小程序来做，也可以尽量多写一些程序来巩固记忆。这里的关键点是明白各个符号的作用，确认自己没搞错，如果搞错了就纠正过来，然后将其用在程序里，并且通过这样的方式加深自己的记忆。</p>
<h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><table>
<thead>
<tr>
<th style="text-align:left">KEYWORD</th>
<th style="text-align:left">DESCRIPTION</th>
<th style="text-align:left">EXAMPLE</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>and</code></td>
<td style="text-align:left">逻辑与</td>
<td style="text-align:left"><code>True and False == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>as</code></td>
<td style="text-align:left"><code>with-as</code>语句的一部分</td>
<td style="text-align:left"><code>with X as Y: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>assert</code></td>
<td style="text-align:left">声明</td>
<td style="text-align:left"><code>assert False, &quot;Error!&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>break</code></td>
<td style="text-align:left">停止整个循环</td>
<td style="text-align:left"><code>while True: break</code></td>
</tr>
<tr>
<td style="text-align:left"><code>class</code></td>
<td style="text-align:left">定义一个类</td>
<td style="text-align:left"><code>class Person(object)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>continue</code></td>
<td style="text-align:left">停止这一次循环，但继续下一次循环</td>
<td style="text-align:left"><code>while True: continuev</code></td>
</tr>
<tr>
<td style="text-align:left"><code>def</code></td>
<td style="text-align:left">定义一个函数</td>
<td style="text-align:left"><code>def X(): pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>del</code></td>
<td style="text-align:left">从字典中删除</td>
<td style="text-align:left"><code>del X[Y]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>elif</code></td>
<td style="text-align:left">Else if 条件</td>
<td style="text-align:left"><code>if: X; elif: Y; else: J</code></td>
</tr>
<tr>
<td style="text-align:left"><code>else</code></td>
<td style="text-align:left">Else 条件</td>
<td style="text-align:left"><code>if: X; elif: Y; else: J</code></td>
</tr>
<tr>
<td style="text-align:left"><code>except</code></td>
<td style="text-align:left">如果捕获异常，执行该代码块</td>
<td style="text-align:left"><code>except ValueError, e: print e</code></td>
</tr>
<tr>
<td style="text-align:left"><code>exec</code></td>
<td style="text-align:left">将字符串作为Python代码执行</td>
<td style="text-align:left"><code>exec &#39;print &quot;hello&quot;&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>finally</code></td>
<td style="text-align:left">不管是否有异常，finally代码块都执行</td>
<td style="text-align:left"><code>finally: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>for</code></td>
<td style="text-align:left">for循环</td>
<td style="text-align:left"><code>for X in Y: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>from</code></td>
<td style="text-align:left">从某一模块中引入特定部分</td>
<td style="text-align:left"><code>import X from Y</code></td>
</tr>
<tr>
<td style="text-align:left"><code>global</code></td>
<td style="text-align:left">定义一个全局变量</td>
<td style="text-align:left"><code>global X</code></td>
</tr>
<tr>
<td style="text-align:left"><code>if</code></td>
<td style="text-align:left">If 条件</td>
<td style="text-align:left"><code>if: X; elif: Y; else: J</code></td>
</tr>
<tr>
<td style="text-align:left"><code>import</code></td>
<td style="text-align:left">引入一个模块到当前模块</td>
<td style="text-align:left"><code>import os</code></td>
</tr>
<tr>
<td style="text-align:left"><code>in</code></td>
<td style="text-align:left">for循环的一部分/ 测试<code>X in Y</code>.</td>
<td style="text-align:left"><code>for X in Y: pass</code> / <code>1 in [1] == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>is</code></td>
<td style="text-align:left">类似<code>==</code>，判断相等</td>
<td style="text-align:left"><code>1 is 1 == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>lambda</code></td>
<td style="text-align:left">创建一个无名函数</td>
<td style="text-align:left"><code>s = lambda y: y ** y; s(3)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>not</code></td>
<td style="text-align:left">逻辑非</td>
<td style="text-align:left"><code>not True == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>or</code></td>
<td style="text-align:left">逻辑或</td>
<td style="text-align:left"><code>True or False == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>pass</code></td>
<td style="text-align:left">该代码块为空</td>
<td style="text-align:left"><code>def empty(): pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>print</code></td>
<td style="text-align:left">打印一个字符串</td>
<td style="text-align:left"><code>print &#39;this string&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>raise</code></td>
<td style="text-align:left">代码出错时，抛出一个异常</td>
<td style="text-align:left"><code>raise ValueError(&quot;No&quot;)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>return</code></td>
<td style="text-align:left">退出函数并返回一个返回值</td>
<td style="text-align:left"><code>def X(): return Y</code></td>
</tr>
<tr>
<td style="text-align:left"><code>try</code></td>
<td style="text-align:left">尝试代签代码块，有异常则进入except代码块</td>
<td style="text-align:left"><code>try: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>while</code></td>
<td style="text-align:left">While循环</td>
<td style="text-align:left"><code>while X: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>with</code></td>
<td style="text-align:left">一个变量的别名</td>
<td style="text-align:left"><code>with X as Y: pass</code></td>
</tr>
<tr>
<td style="text-align:left"><code>yield</code></td>
<td style="text-align:left">暂停， 返回给调用者</td>
<td style="text-align:left"><code>def X(): yield Y; X().next()</code></td>
</tr>
</tbody>
</table>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>针对每一种数据类型，都举出一些例子来，例如针对string，你可以举出一些字符串，针对 number，你可以举出一些数字。</p>
<table>
<thead>
<tr>
<th style="text-align:left">TYPE</th>
<th style="text-align:left">DESCRIPTION</th>
<th style="text-align:left">EXAMPLE</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>True</code></td>
<td style="text-align:left">True 布尔值.</td>
<td style="text-align:left"><code>True or False == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>False</code></td>
<td style="text-align:left">False 布尔值.</td>
<td style="text-align:left"><code>False and True == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>None</code></td>
<td style="text-align:left">表示 “nothing” 或者”no value”.</td>
<td style="text-align:left"><code>x = None</code></td>
</tr>
<tr>
<td style="text-align:left"><code>strings</code></td>
<td style="text-align:left">字符串，储存文本信息</td>
<td style="text-align:left"><code>x = &quot;hello&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>numbers</code></td>
<td style="text-align:left">储存整数</td>
<td style="text-align:left"><code>i = 100</code></td>
</tr>
<tr>
<td style="text-align:left"><code>floats</code></td>
<td style="text-align:left">储存小数</td>
<td style="text-align:left"><code>i = 10.389</code></td>
</tr>
<tr>
<td style="text-align:left"><code>lists</code></td>
<td style="text-align:left">储存某种东西的列表</td>
<td style="text-align:left"><code>j = [1,2,3,4]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>dicts</code></td>
<td style="text-align:left">储存某些东西的键值对</td>
<td style="text-align:left"><code>e = {&#39;x&#39;: 1, &#39;y&#39;: 2}</code></td>
</tr>
</tbody>
</table>
<h2 id="字符串转义序列"><a href="#字符串转义序列" class="headerlink" title="字符串转义序列"></a>字符串转义序列</h2><p>对于字符串转义序列，你需要在字符串中应用它们，确认自己清楚地知道它们的功能。</p>
<table>
<thead>
<tr>
<th style="text-align:left">ESCAPE</th>
<th style="text-align:left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\\</td>
<td style="text-align:left">斜线</td>
</tr>
<tr>
<td style="text-align:left">\’</td>
<td style="text-align:left">单引号</td>
</tr>
<tr>
<td style="text-align:left">\”</td>
<td style="text-align:left">双引号</td>
</tr>
<tr>
<td style="text-align:left">\a</td>
<td style="text-align:left">Bell</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">退格</td>
</tr>
<tr>
<td style="text-align:left">\f</td>
<td style="text-align:left">Formfeed</td>
</tr>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:left">换行</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:left">Carriage</td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:left">Tab键</td>
</tr>
<tr>
<td style="text-align:left">\v</td>
<td style="text-align:left">垂直的tab</td>
</tr>
</tbody>
</table>
<h2 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h2><table>
<thead>
<tr>
<th style="text-align:left">ESCAPE</th>
<th style="text-align:left">DESCRIPTION</th>
<th style="text-align:left">EXAMPLE</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>%d</code></td>
<td style="text-align:left">格式化整数 (不包含浮点数).</td>
<td style="text-align:left"><code>&quot;%d&quot; % 45 == &#39;45&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%i</code></td>
<td style="text-align:left">与%d相同</td>
<td style="text-align:left"><code>&quot;%i&quot; % 45 == &#39;45&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%o</code></td>
<td style="text-align:left">8进制数字</td>
<td style="text-align:left"><code>&quot;%o&quot; % 1000 == &#39;1750&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%u</code></td>
<td style="text-align:left">负数</td>
<td style="text-align:left"><code>&quot;%u&quot; % -1000 == &#39;-1000&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%x</code></td>
<td style="text-align:left">小写的十六进制数字</td>
<td style="text-align:left"><code>&quot;%x&quot; % 1000 == &#39;3e8&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%X</code></td>
<td style="text-align:left">大写的十六进制数字</td>
<td style="text-align:left"><code>&quot;%X&quot; % 1000 == &#39;3E8&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%e</code></td>
<td style="text-align:left">小写 ‘e’的指数标记</td>
<td style="text-align:left"><code>&quot;%e&quot; % 1000 == &#39;1.000000e+03&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%E</code></td>
<td style="text-align:left">大写 ‘e’的指数标记</td>
<td style="text-align:left"><code>&quot;%E&quot; % 1000 == &#39;1.000000E+03&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%f</code></td>
<td style="text-align:left">浮点数</td>
<td style="text-align:left"><code>&quot;%f&quot; % 10.34 == &#39;10.340000&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%F</code></td>
<td style="text-align:left">与%f相同</td>
<td style="text-align:left"><code>&quot;%F&quot; % 10.34 == &#39;10.340000&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%g</code></td>
<td style="text-align:left">%f 或者 %e中较短的一个</td>
<td style="text-align:left"><code>&quot;%g&quot; % 10.34 == &#39;10.34&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%G</code></td>
<td style="text-align:left">%F 或者 %E中较短的一个</td>
<td style="text-align:left"><code>&quot;%G&quot; % 10.34 == &#39;10.34&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%c</code></td>
<td style="text-align:left">字符格式化</td>
<td style="text-align:left"><code>&quot;%c&quot; % 34 == &#39;&quot;&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%r</code></td>
<td style="text-align:left">类型格式化</td>
<td style="text-align:left"><code>&quot;%r&quot; % int == &quot;&lt;type &#39;int&#39;&gt;&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%s</code></td>
<td style="text-align:left">字符串格式</td>
<td style="text-align:left"><code>&quot;%s there&quot; % &#39;hi&#39; == &#39;hi there&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%%</code></td>
<td style="text-align:left">表示百分号%</td>
<td style="text-align:left"><code>&quot;%g%%&quot; % 10.34 == &#39;10.34%&#39;</code></td>
</tr>
</tbody>
</table>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>有些操作符号你可能还不熟悉，不过还是一一看过去，研究一下它们的功能，如果你研究不出来也没关系，记录下来日后解决。</p>
<table>
<thead>
<tr>
<th style="text-align:left">OPERATOR</th>
<th style="text-align:left">DESCRIPTION</th>
<th style="text-align:left">EXAMPLE</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>+</code></td>
<td style="text-align:left">加</td>
<td style="text-align:left"><code>2 + 4 == 6</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-</code></td>
<td style="text-align:left">减</td>
<td style="text-align:left"><code>2 - 4 == -2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>*</code></td>
<td style="text-align:left">乘</td>
<td style="text-align:left"><code>2 * 4 == 8</code></td>
</tr>
<tr>
<td style="text-align:left"><code>**</code></td>
<td style="text-align:left">幂乘</td>
<td style="text-align:left"><code>2 ** 4 == 16</code></td>
</tr>
<tr>
<td style="text-align:left"><code>/</code></td>
<td style="text-align:left">除</td>
<td style="text-align:left"><code>2 / 4.0 == 0.5</code></td>
</tr>
<tr>
<td style="text-align:left"><code>//</code></td>
<td style="text-align:left">整除，得到除法的商。</td>
<td style="text-align:left"><code>2 // 4.0 == 0.0</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%</code></td>
<td style="text-align:left">模除，返回除法的余数。</td>
<td style="text-align:left"><code>2 % 4 == 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">小于</td>
<td style="text-align:left"><code>4 &lt; 4 == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">大于</td>
<td style="text-align:left"><code>4 &gt; 4 == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;=</code></td>
<td style="text-align:left">小于等于</td>
<td style="text-align:left"><code>4 &lt;= 4 == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;=</code></td>
<td style="text-align:left">大于等于</td>
<td style="text-align:left"><code>4 &gt;= 4 == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>==</code></td>
<td style="text-align:left">等于，比较操作对象是否相等。</td>
<td style="text-align:left"><code>4 == 5 == False</code></td>
</tr>
<tr>
<td style="text-align:left"><code>!=</code></td>
<td style="text-align:left">不等于</td>
<td style="text-align:left"><code>4 != 5 == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;&gt;</code></td>
<td style="text-align:left">不等于</td>
<td style="text-align:left"><code>4 &lt;&gt; 5 == True</code></td>
</tr>
<tr>
<td style="text-align:left"><code>( )</code></td>
<td style="text-align:left">括号</td>
<td style="text-align:left"><code>len(&#39;hi&#39;) == 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>[ ]</code></td>
<td style="text-align:left">列表括号</td>
<td style="text-align:left"><code>[1,3,4]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>{ }</code></td>
<td style="text-align:left">字典括号</td>
<td style="text-align:left"><code>{&#39;x&#39;: 5, &#39;y&#39;: 10}</code></td>
</tr>
<tr>
<td style="text-align:left"><code>@</code></td>
<td style="text-align:left">装饰符</td>
<td style="text-align:left"><code>@classmethod</code></td>
</tr>
<tr>
<td style="text-align:left"><code>,</code></td>
<td style="text-align:left">逗号</td>
<td style="text-align:left"><code>range(0, 10)</code></td>
</tr>
<tr>
<td style="text-align:left"><code>:</code></td>
<td style="text-align:left">冒号</td>
<td style="text-align:left"><code>def X():</code></td>
</tr>
<tr>
<td style="text-align:left"><code>.</code></td>
<td style="text-align:left">Dot</td>
<td style="text-align:left"><code>self.x = 10</code></td>
</tr>
<tr>
<td style="text-align:left"><code>=</code></td>
<td style="text-align:left">赋值等于</td>
<td style="text-align:left"><code>x = 10</code></td>
</tr>
<tr>
<td style="text-align:left"><code>;</code></td>
<td style="text-align:left">分号</td>
<td style="text-align:left"><code>print &quot;hi&quot;; print &quot;there&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>+=</code></td>
<td style="text-align:left">加等于</td>
<td style="text-align:left"><code>x = 1; x += 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-=</code></td>
<td style="text-align:left">减等于</td>
<td style="text-align:left"><code>x = 1; x -= 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>*=</code></td>
<td style="text-align:left">乘等于</td>
<td style="text-align:left"><code>x = 1; x *= 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>/=</code></td>
<td style="text-align:left">除等于</td>
<td style="text-align:left"><code>x = 1; x /= 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>//=</code></td>
<td style="text-align:left">整除等于</td>
<td style="text-align:left"><code>x = 1; x //= 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>%=</code></td>
<td style="text-align:left">模除等于</td>
<td style="text-align:left"><code>x = 1; x %= 2</code></td>
</tr>
<tr>
<td style="text-align:left"><code>**=</code></td>
<td style="text-align:left">幂乘等于</td>
<td style="text-align:left"><code>x = 1; x **= 2</code></td>
</tr>
</tbody>
</table>
<p>花一个星期学习这些东西，如果你能提前完成就更好了。我们的目的是覆盖到所有的符号 类型，确认你已经牢牢记住它们。另外很重要的一点是这样你可以找出自己还不知道哪些 东西，为自己日后学习找到一些方向。</p>
<h2 id="读代码"><a href="#读代码" class="headerlink" title="读代码"></a>读代码</h2><p>找一些python的代码读读试试。你可以读任何的python代码，并且可以借鉴其中的一些思想。你已经具备足够的知识去阅读代码，但是你可能还不能完全明白代码实现了什么功能。这节练习就是教给你如何用你学过的知识弄明白别人的代码。</p>
<p>首先，把你找到的代码打印出来，是的，你需要把它们打印出来，因为相比电脑屏幕，你的大脑和眼睛更容易看清楚纸上的内容。</p>
<p>接下来，通读你打印的代码，按照下面说的做一些笔记：</p>
<blockquote>
<ol>
<li>找出所有的函数，以及它们的功能。</li>
<li>每一个变量在哪里被赋予初始值。</li>
<li>代码的不同地方有没有相同名字的变量，这可能会带来隐患。</li>
<li>有没有if语句没有else代码块的，这么写对吗？</li>
<li>有没有无终止的while循环</li>
<li>标记出不管任何原因，你看不懂的代码部分。</li>
</ol>
</blockquote>
<p>第三步，当你做完上面内容之后，尝试给自己解释一下自己写的注释。说明这些函数是如何应用的，包含哪些变量，以及你想弄明白的其他事情。</p>
<p>最后，在所有难以理解的部分，逐行、逐个函数的跟踪每个变量的值。你也可以在准备一份打印的代码，在空白处写下你要跟踪的每个变量的值。</p>
<p>当你弄明白这段代码是做什么的之后，回到电脑上再读一遍代码，看看能不能找到一些新的东西。多找一些代码练习，直到你能不需要打印代码就能弄懂它们的功能为止。</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>弄明白“流程图”是什么，试着画几个出来</li>
<li>读代码的过程，如果发现了什么错误，尝试着改正它，并将你修改后的结果发给代码的作者。</li>
<li>另一个技巧是用<code>#</code>给你正在读的代码加注释，有时候，你的这些注释会帮到后面来读代码的人哦。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-d-和-i有什么区别？"><a href="#Q-d-和-i有什么区别？" class="headerlink" title="Q: %d 和%i有什么区别？"></a>Q: <code>%d</code> 和<code>%i</code>有什么区别？</h3><blockquote>
<p>没有区别，只不过由于历史原因，人们更喜欢用<code>%d</code>。</p>
</blockquote>
<h3 id="Q-我们怎么在网上搜索这些符号和关键字？"><a href="#Q-我们怎么在网上搜索这些符号和关键字？" class="headerlink" title="Q: 我们怎么在网上搜索这些符号和关键字？"></a>Q: 我们怎么在网上搜索这些符号和关键字？</h3><blockquote>
<p>只要把“python”放在你要搜索的内容之前就可以了，比如，你想搜索<code>yield</code>，那么就输入<code>python yield</code>。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise36" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/28/learn-python-the-hard-way-exercise36/" class="article-date">
  	<time datetime="2014-11-28T13:34:55.000Z" itemprop="datePublished">2014-11-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/28/learn-python-the-hard-way-exercise36/">笨办法学Python--exercise36.设计和调试</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>现在你已经学会了<code>if 语句</code>，我将给你一些使用<code>for 循环</code>和<code>while 循环</code>的规则，以免你日后碰到麻烦。我还会教你一些调试的小技巧，以便你能发现自己程序的问题。最后，你将需要设计一个和上节类似的小游戏，不过内容略有更改。</p>
<h2 id="IF-语句的规则："><a href="#IF-语句的规则：" class="headerlink" title="IF 语句的规则："></a>IF 语句的规则：</h2><blockquote>
<ol>
<li>每一个“if 语句”必须包含一个 else.</li>
<li>如果这个<code>else</code>永远都不应该被执行到，因为它本身没有任何意义，那你必须在else语句后面使用一个叫做<code>die</code>的函数，让它打印出错误信息,这和上一节的习题类似，这样你可以找到很多的错误。</li>
<li>“if 语句”的嵌套不要超过 2 层，最好尽量保持只有 1 层。 </li>
<li>将“if 语句”当做段落来对待，其中的每一个<code>if-elif-else</code> 组合就跟一个段落的句子一样。在这种组合的最前面和最后面留一个空行以作区分。</li>
<li>你的布尔测试应该很简单，如果它们很复杂的话，你需要将它们的运算事先放到一个 变量里，并且为变量取一个好名字。</li>
</ol>
</blockquote>
<p>如果你遵循以上规则，你就会写出比大部分程序员都好的代码来。回到上一节练习，看看我有没有遵循这些规则，如果没有的话，就将其改正过来。</p>
<blockquote>
<p><strong>Warning:</strong><br>在日常编程中不要死板的遵守规则。在训练中，你需要通过这些规则的应用来巩固你学到的知识，而在实际编程中这些规则有时其实很蠢。如果你觉得哪个规则很蠢，就别使用它。</p>
</blockquote>
<h2 id="循环的规则"><a href="#循环的规则" class="headerlink" title="循环的规则"></a>循环的规则</h2><blockquote>
<ol>
<li>只有在循环永不停止时使用“while循环”，这意味着你可能永远都用不到。这条只有 Python 中成立，其他的语言另当别论。</li>
<li>其他类型的循环都使用“for循环”，尤其是在循环的对象数量固定或者有限的情况下。</li>
</ol>
</blockquote>
<h2 id="调试的小技巧"><a href="#调试的小技巧" class="headerlink" title="调试的小技巧"></a>调试的小技巧</h2><blockquote>
<ol>
<li>不要使用 “debugger”。<code>Debugger</code>所作的相当于对病人的全身扫描。你不会得到某方面的有用信息，而且你会发现它输出的信息大部分没有用，或者只会让你更困惑。</li>
<li>最好的调试程序的方法是使用<code>print</code>,在各个你想要检查的关键环节将关键变量打印出来，从而检查哪里是否有错。</li>
<li>让程序一部分一部分地运行起来。不要等一个很长的脚本写完后才去运行它。写一点，运行一点，修改一点。</li>
</ol>
</blockquote>
<h2 id="家庭作业"><a href="#家庭作业" class="headerlink" title="家庭作业"></a>家庭作业</h2><p>写一个和上节类似的小游戏。任何题材的游戏都可以。尽量花一周的时间让这个游戏有趣一些，作为附加题，你可以尽量多的使用列表，函数和模块（还记得练习13吗？），而且，尽量弄一些新的Python代码让你的游戏运行起来。</p>
<p>在你开始编码之前，你应该先画一张地图出来，提前设计出玩家可能遇到的房间、怪物以及陷阱等。</p>
<p>当你画好了梯度，你就可以开始编码了。如果你发现地图有问题的话，修改一下，让代码和地图相匹配。</p>
<p>完成一个软件的最好方式是把它们拆解为像下面这样的小块：</p>
<blockquote>
<ol>
<li>在纸上写下你完成这个软件所需要做的所有任务。这就是你的待办事项列表。</li>
<li>先找到你列表中最容易的事情。</li>
<li>在你的源代码中增加注释，作为你完成这项任务的指南。</li>
<li>在这些注释下面，开始编码。</li>
<li>然后立即运行你的代码，看它是否正常工作。</li>
<li>循环的进行代码编写，测试运行，以及代码修正，直到代码正常运行。</li>
<li>在你的列表中划掉刚完成的任务，然后再挑选下一个最容易完成的任务，重复进行以上步骤。</li>
</ol>
</blockquote>
<p>这套程序会帮助你在写代码的时候保持系统的、一致的风格。当你开始工作的时候，更新你的任务清单，增加你要做的，并删除已完成的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise35" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/28/learn-python-the-hard-way-exercise35/" class="article-date">
  	<time datetime="2014-11-28T10:46:31.000Z" itemprop="datePublished">2014-11-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/28/learn-python-the-hard-way-exercise35/">笨办法学Python--exercise35.分支和函数</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你已经学会了 if 语句、函数、还有列表。现在你要练习扭转一下思维了。把下面的代码写下来，看你是否能弄懂它实现的是什么功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> exit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gold_room</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"This room is full of gold.  How much do you take?"</span></span><br><span class="line"></span><br><span class="line">    choice = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">"0"</span> <span class="keyword">in</span> choice <span class="keyword">or</span> <span class="string">"1"</span> <span class="keyword">in</span> choice:</span><br><span class="line">        how_much = int(choice)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dead(<span class="string">"Man, learn to type a number."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> how_much &lt; <span class="number">50</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Nice, you're not greedy, you win!"</span></span><br><span class="line">        exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dead(<span class="string">"You greedy bastard!"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bear_room</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"There is a bear here."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"The bear has a bunch of honey."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"The fat bear is in front of another door."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"How are you going to move the bear?"</span></span><br><span class="line">    bear_moved = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        choice = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">"take honey"</span>:</span><br><span class="line">            dead(<span class="string">"The bear looks at you then slaps your face off."</span>)</span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">"taunt bear"</span> <span class="keyword">and</span> <span class="keyword">not</span> bear_moved:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"The bear has moved from the door. You can go through it now."</span></span><br><span class="line">            bear_moved = <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">"taunt bear"</span> <span class="keyword">and</span> bear_moved:</span><br><span class="line">            dead(<span class="string">"The bear gets pissed off and chews your leg off."</span>)</span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">"open door"</span> <span class="keyword">and</span> bear_moved:</span><br><span class="line">            gold_room()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"I got no idea what that means."</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cthulhu_room</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Here you see the great evil Cthulhu."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"He, it, whatever stares at you and you go insane."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Do you flee for your life or eat your head?"</span></span><br><span class="line"></span><br><span class="line">    choice = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"flee"</span> <span class="keyword">in</span> choice:</span><br><span class="line">        start()</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"head"</span> <span class="keyword">in</span> choice:</span><br><span class="line">        dead(<span class="string">"Well that was tasty!"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cthulhu_room()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dead</span><span class="params">(why)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> why, <span class="string">"Good job!"</span></span><br><span class="line">    exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"You are in a dark room."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"There is a door to your right and left."</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Which one do you take?"</span></span><br><span class="line"></span><br><span class="line">    choice = raw_input(<span class="string">"&gt; "</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> choice == <span class="string">"left"</span>:</span><br><span class="line">        bear_room()</span><br><span class="line">    <span class="keyword">elif</span> choice == <span class="string">"right"</span>:</span><br><span class="line">        cthulhu_room()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dead(<span class="string">"You stumble around the room until you starve."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start()</span><br></pre></td></tr></table></figure>
<h2 id="你看到的结果"><a href="#你看到的结果" class="headerlink" title="你看到的结果"></a>你看到的结果</h2><p>这是我玩这个游戏的过程：</p>
<pre><code>$ python ex35.py
You are in a dark room.
There is a door to your right and left.
Which one do you take?
&gt;  left
There is a bear here.
The bear has a bunch of honey.
The fat bear is in front of another door.
How are you going to move the bear?
&gt;  taunt bear
The bear has moved from the door. You can go through it now.
&gt;  open door
This room is full of gold.  How much do you take?
&gt;  1000
You greedy bastard! Good job!
</code></pre><h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>把这个游戏的地图画出来，把自己的路线也画出来。</li>
<li>改正你所有的错误，包括拼写错误。</li>
<li>为你不懂的函数写注释。</li>
<li>为游戏添加更多元素。通过怎样的方式可以简化并且扩展游戏的功能呢？</li>
<li>这个<code>gold_room</code>游戏使用了奇怪的方式让你键入数字。这种方式会导致什么样的 bug？ 你可以用比检查0、1更好的方式判断输入是否是数字吗？<code>int()</code> 这个函数可以给你一些头绪。</li>
</ol>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="Q-求助！这个程序是怎样运行的？"><a href="#Q-求助！这个程序是怎样运行的？" class="headerlink" title="Q: 求助！这个程序是怎样运行的？"></a>Q: 求助！这个程序是怎样运行的？</h3><blockquote>
<p>当你理解一段代码遇到困难的时候，可以给每一行代码加上一段简单的注释用来解释每一句实现什么功能。尽量使你的注释短小且与代码近似.然后用图解或者写一段描述来弄懂代码是如何工作的。如果你这么做了，你就能弄明白这段代码是如何工作的。</p>
</blockquote>
<h3 id="Q-你为什么用了while-True"><a href="#Q-你为什么用了while-True" class="headerlink" title="Q: 你为什么用了while True?"></a>Q: 你为什么用了<code>while True</code>?</h3><blockquote>
<p>这么写可以创建一个无限循环</p>
</blockquote>
<h3 id="Q-exit-是干什么的？"><a href="#Q-exit-是干什么的？" class="headerlink" title="Q: exit()是干什么的？"></a>Q: <code>exit()</code>是干什么的？</h3><blockquote>
<p>在许多操作系统中可以使用<code>exit(0)</code>来中止程序，传递的数字参数表示是否遇到异常。如果使用<code>exit(1)</code>退出将会出现一个错误，但是用<code>exit(0)</code>就是正常的退出。参数部分和正常的布尔逻辑正好是相反的 (正常的布尔逻辑中 0==False) 您可以使用不同的数字来表示不同的错误结果。你也可以用<code>exit(100)</code>来表示一个不同于<code>exit(2)</code>和 <code>exit(1)</code>的错误信息.</p>
</blockquote>
<h3 id="Q-为什么有时候把raw-input-写成raw-input-39-gt-39"><a href="#Q-为什么有时候把raw-input-写成raw-input-39-gt-39" class="headerlink" title="Q: 为什么有时候把raw_input 写成raw_input(&#39;&gt;&#39;)"></a>Q: 为什么有时候把<code>raw_input</code> 写成<code>raw_input(&#39;&gt;&#39;)</code></h3><blockquote>
<p><code>raw_input</code>的参数只是一个字符串，会打印显示在要求用户输入之前。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-learn-python-the-hard-way-exercise34" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/28/learn-python-the-hard-way-exercise34/" class="article-date">
  	<time datetime="2014-11-28T09:11:20.000Z" itemprop="datePublished">2014-11-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/28/learn-python-the-hard-way-exercise34/">笨办法学Python--exercise34.访问列表元素</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>列表的用处很大，但只有你能访问里边的内容时它才能发挥出作用来。你已经学会了按顺序读出列表的内容，但如果你要得到第5个元素该怎么办呢？你需要知道如何访问列表中的元素。访问第一个元素的方法是这样的：</p>
<pre><code>animals = [&apos;bear&apos;, &apos;tiger&apos;, &apos;penguin&apos;, &apos;zebra&apos;]
bear = animals[0]
</code></pre><p>你定义了一个 animals 的列表，然后你用 0 来获取第一个元素?! 这是怎么回事？因为数学里边就是这样，所以 Python 的列表也是从 0 开始的。虽然看上去很奇怪，这样定义其实有它的好处，实际上设计成 0 或者 1 开头其实都可以。</p>
<p>最好的解释方式是将你平时使用数字的方式和程序员使用数字的方式做对比。</p>
<p>假设你在观看上面列表中的四种动物 (<code>[&#39;bear&#39;, &#39;tiger&#39;, &#39;penguin&#39;, &#39;zebra&#39;]</code>) 赛跑。 而它们比赛的名词正好跟列表里的次序一样。这是一场很激动人心的比赛，因为这些动物没打算吃掉对方，而且比赛还真的举办起来了。结果你的朋友来晚了，他想知道谁赢了比赛，他会问你“嘿，谁是第 0 名”吗？不会的，他会问“嘿，谁是第 1 名？”</p>
<p>这是因为动物的次序是很重要的。没有第一个就没有第二个，没有第二个也没有第三个。第零个是不存在的，因为零的意思是什么都没有。“什么都没有”怎么赢比赛嘛，完全不合逻辑。这样的数字我们称之为“序数(ordinal number)”，因为它们表示的是事物的顺序。</p>
<p>而程序员不能用这种方式思考问题，因为他们可以从列表的任何一个位置取出一个元素来。对程序员来说，上述的列表更像是一叠卡片如果他们想要 tiger，就抓它出来，如果想要zebra，也一样抓取出来。要随机地抓取列表里的内容，列表的每一个元素都应该有一个地址，或者一个“index（索引）”，而最好的方式是使用以0开头的索引。相信我说的这一点吧，这种方式获取元素会更容易。这类的数字被称为“基数(cardinal number)”，它意味着你可以任意抓取元素，所以我们需要一个 0 号元素。</p>
<p>那么，这些知识对于你的列表操作有什么帮助呢？很简单，每次你对自己说“我要第 3 只动物”时，你需要将“序数”转换成“基数”，只要将前者减 1 就可以了。第 3 只动物的索引是2，也就是penguin。由于你一辈子都在跟序数打交道，所以你需要用这种方式来获得基数，只要减 1 就都搞定了。<br>记住: ordinal == 有序，以 1 开始；cardinal == 随机选取, 以 0 开始。</p>
<p>让我们练习一下。定义一个动物列表，然后跟着做后面的练习，你需要写出所指位置的动物名称。如果我用的是“1st,2nd”等说法，那说明我用的是序数，所以你需要减去 1。如果我给你的是基数（0, 1, 2），你只要直接使用即可。</p>
<pre><code>animals = [&apos;bear&apos;, &apos;python&apos;, &apos;peacock&apos;, &apos;kangaroo&apos;, &apos;whale&apos;, &apos;platypus&apos;]
</code></pre><p></p>
<pre><code>The animal at 1.
The third (3rd) animal.
The first (1st) animal.
The animal at 3.
The fifth (5th) animal.
The animal at 2.
The sixth (6th) animal.
The animal at 4.
</code></pre><p>对于上述每一条，以这样的格式写出一个完整的句子：“The 1st animal is at 0 and is a bear.” 然后倒过来念：“The animal at 0 is the 1st animal and is a bear.”</p>
<p>使用 python 检查你的答案。</p>
<h2 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h2><blockquote>
<ol>
<li>以你对于这些不同的数字类型的了解，解释一下为什么 “January 1, 2010” 里是 2010 而不是 2009？（提示：你不能随机挑选年份。）</li>
<li>再写一些列表，用一样的方式作出索引，确认自己可以在两种数字之间互相翻译。</li>
<li>使用 python 检查自己的答案。</li>
</ol>
</blockquote>
<p><div></div></p>
<blockquote>
<p><strong>Warning:</strong><br>会有程序员告诉你让你去阅读一个叫“Dijkstra”的人写的关于数字的话题。我建议你还是不读为妙。除非你喜欢听一个在编程这一行刚兴起时就停止从事编程的人对你大喊大叫。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python/">Python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 flyouting and shirley
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>